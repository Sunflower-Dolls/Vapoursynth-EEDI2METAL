/*
 * EEDI2METAL: EEDI2 filter using METAL
 *
 * Copyright (C) 2005-2006 Kevin Stone
 * Copyright (C) 2014-2019 HolyWu
 * Copyright (C) 2021 Misaki Kasumi
 * Copyright (C) 2025 Sunflower Dolls
 *
 * This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation,
 * Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
 */

#include <metal_stdlib>
using namespace metal;

struct EEDI2Param {
    uint width, height, d_pitch, field;
    uint nt4, nt7, nt8, nt13, nt19;
    uint mthresh, lthresh, vthresh;
    uint estr, dstr, maxd;
    uint subSampling;
    uint shift;
    uint int_pitch;
};

constant int limlut[33] = {6,  6,  7,  7,  8,  8,  9,  9,  9,  10, 10,
                           11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12,
                           12, 12, 12, 12, 12, 12, 12, 12, 12, -1, -1};

#define PASTE(a, b) a##b
#define KERNEL_NAME_INTERNAL(name, suffix) PASTE(name, suffix)
#define KERNEL_NAME(name) KERNEL_NAME_INTERNAL(name, SUFFIX)

template <typename T> METAL_FUNC T mmax(T last) { return last; }

template <typename T, typename... Args>
METAL_FUNC T mmax(T first, Args... remaining) {
    auto candidate = mmax(remaining...);
    return first < candidate ? candidate : first;
}

template <typename T> METAL_FUNC T mmin(T last) { return last; }

template <typename T, typename... Args>
METAL_FUNC T mmin(T first, Args... remaining) {
    auto candidate = mmin(remaining...);
    return first < candidate ? first : candidate;
}

METAL_FUNC int round_div(int a, int b) { return (a + (b / 2)) / b; }

namespace sorting_impl {

// Basic compare and swap helper
template <typename T> METAL_FUNC void min_max_swap(thread T &a, thread T &b) {
    const T c = a;
    a = a < b ? a : b;
    b = c < b ? b : c;
}

} // namespace sorting_impl

namespace bose {
template <typename T, size_t I, size_t J> METAL_FUNC void P(thread T *arr) {
    sorting_impl::min_max_swap(arr[I - 1], arr[J - 1]);
}

template <typename T, size_t I, size_t X, size_t J, size_t Y>
METAL_FUNC void Pbracket(thread T *arr) {
    constexpr size_t A = X / 2, B = (X & 1) ? (Y / 2) : ((Y + 1) / 2);

    if constexpr (X == 1 && Y == 1)
        P<T, I, J>(arr);
    else if constexpr (X == 1 && Y == 2) {
        P<T, I, J + 1>(arr);
        P<T, I, J>(arr);
    } else if constexpr (X == 2 && Y == 1) {
        P<T, I, J>(arr);
        P<T, I + 1, J>(arr);
    } else {
        Pbracket<T, I, A, J, B>(arr);
        Pbracket<T, I + A, X - A, J + B, Y - B>(arr);
        Pbracket<T, I + A, X - A, J, B>(arr);
    }
}

template <typename T, size_t I, size_t M> METAL_FUNC void Pstar(thread T *arr) {
    constexpr size_t A = M / 2;

    if constexpr (M > 1) {
        Pstar<T, I, A>(arr);
        Pstar<T, I + A, M - A>(arr);
        Pbracket<T, I, A, I + A, M - A>(arr);
    }
}
} // namespace bose

template <typename T, size_t N>
METAL_FUNC void boseSortArray(thread T (&arr)[N]) {
    bose::Pstar<T, 1, N>(arr);
}

namespace sorting_networks {
template <typename T, size_t N> struct Sorter {
    static METAL_FUNC void sort(thread T (&arr)[N]) { boseSortArray(arr); }
};

// https://bertdobbelaere.github.io/sorting_networks_extended.html

// Optimal network for N=3: 3 comparators, 3 layers
template <typename T> struct Sorter<T, 3> {
    static METAL_FUNC void sort(thread T (&arr)[3]) {
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
    }
};

// Optimal network for N=4: 5 comparators, 3 layers
template <typename T> struct Sorter<T, 4> {
    static METAL_FUNC void sort(thread T (&arr)[4]) {
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
    }
};

// Optimal network for N=5: 9 comparators, 5 layers
template <typename T> struct Sorter<T, 5> {
    static METAL_FUNC void sort(thread T (&arr)[5]) {
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
    }
};

// Optimal network for N=6: 12 comparators, 5 layers
template <typename T> struct Sorter<T, 6> {
    static METAL_FUNC void sort(thread T (&arr)[6]) {
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
    }
};

// Optimal network for N=7: 16 comparators, 6 layers
template <typename T> struct Sorter<T, 7> {
    static METAL_FUNC void sort(thread T (&arr)[7]) {
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
    }
};

// Optimal network for N=8: 19 comparators, 6 layers
template <typename T> struct Sorter<T, 8> {
    static METAL_FUNC void sort(thread T (&arr)[8]) {
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
    }
};

// Optimal network for N=9: 25 comparators, 7 layers
template <typename T> struct Sorter<T, 9> {
    static METAL_FUNC void sort(thread T (&arr)[9]) {
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
    }
};

// Optimal network for N=10: 29 comparators, 8 layers
template <typename T> struct Sorter<T, 10> {
    static METAL_FUNC void sort(thread T (&arr)[10]) {
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[7]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
    }
};

// Optimal network for N=11: 35 comparators, 8 layers
template <typename T> struct Sorter<T, 11> {
    static METAL_FUNC void sort(thread T (&arr)[11]) {
        sorting_impl::min_max_swap(arr[0], arr[9]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
    }
};

// Optimal network for N=12: 39 comparators, 9 layers
template <typename T> struct Sorter<T, 12> {
    static METAL_FUNC void sort(thread T (&arr)[12]) {
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
    }
};

// Optimal network for N=13: 45 comparators, 10 layers
template <typename T> struct Sorter<T, 13> {
    static METAL_FUNC void sort(thread T (&arr)[13]) {
        sorting_impl::min_max_swap(arr[0], arr[12]);
        sorting_impl::min_max_swap(arr[1], arr[10]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
    }
};

// Optimal network for N=14: 51 comparators, 10 layers
template <typename T> struct Sorter<T, 14> {
    static METAL_FUNC void sort(thread T (&arr)[14]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
    }
};

// Optimal network for N=15: 56 comparators, 10 layers
template <typename T> struct Sorter<T, 15> {
    static METAL_FUNC void sort(thread T (&arr)[15]) {
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[4], arr[14]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[0], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
    }
};

// Optimal network for N=16: 60 comparators, 10 layers
template <typename T> struct Sorter<T, 16> {
    static METAL_FUNC void sort(thread T (&arr)[16]) {
        sorting_impl::min_max_swap(arr[0], arr[13]);
        sorting_impl::min_max_swap(arr[1], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
    }
};

// Optimal network for N=17: 71 comparators, 12 layers
template <typename T> struct Sorter<T, 17> {
    static METAL_FUNC void sort(thread T (&arr)[17]) {
        sorting_impl::min_max_swap(arr[0], arr[11]);
        sorting_impl::min_max_swap(arr[1], arr[15]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[1], arr[13]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[4], arr[14]);
        sorting_impl::min_max_swap(arr[5], arr[15]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[4], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[7]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
    }
};

// Optimal network for N=18: 77 comparators, 12 layers
template <typename T> struct Sorter<T, 18> {
    static METAL_FUNC void sort(thread T (&arr)[18]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[0], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[2], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[1], arr[10]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[16]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[13]);
        sorting_impl::min_max_swap(arr[4], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[12]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[15]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
    }
};

// Optimal network for N=19: 85 comparators, 12 layers
template <typename T> struct Sorter<T, 19> {
    static METAL_FUNC void sort(thread T (&arr)[19]) {
        sorting_impl::min_max_swap(arr[0], arr[12]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[11]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[4], arr[14]);
        sorting_impl::min_max_swap(arr[5], arr[15]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[10]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[8]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[15]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
    }
};

// Optimal network for N=20: 91 comparators, 12 layers
template <typename T> struct Sorter<T, 20> {
    static METAL_FUNC void sort(thread T (&arr)[20]) {
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[0], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[11]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[19]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[8], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[12]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[17]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
    }
};

// Optimal network for N=21: 99 comparators, 15 layers
template <typename T> struct Sorter<T, 21> {
    static METAL_FUNC void sort(thread T (&arr)[21]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[20]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[20]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
    }
};

// Optimal network for N=22: 106 comparators, 13 layers
template <typename T> struct Sorter<T, 22> {
    static METAL_FUNC void sort(thread T (&arr)[22]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[0], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[15]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[20]);
        sorting_impl::min_max_swap(arr[7], arr[21]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[18]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
    }
};

// Optimal network for N=23: 114 comparators, 14 layers
template <typename T> struct Sorter<T, 23> {
    static METAL_FUNC void sort(thread T (&arr)[23]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[5], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[21]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[21]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[8]);
        sorting_impl::min_max_swap(arr[2], arr[12]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
    }
};

// Optimal network for N=24: 120 comparators, 13 layers
template <typename T> struct Sorter<T, 24> {
    static METAL_FUNC void sort(thread T (&arr)[24]) {
        sorting_impl::min_max_swap(arr[0], arr[20]);
        sorting_impl::min_max_swap(arr[1], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[23]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[21]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[22]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[11]);
        sorting_impl::min_max_swap(arr[2], arr[7]);
        sorting_impl::min_max_swap(arr[4], arr[17]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[12], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[1], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
    }
};

// Optimal network for N=25: 130 comparators, 15 layers
template <typename T> struct Sorter<T, 25> {
    static METAL_FUNC void sort(thread T (&arr)[25]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[1], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[21]);
        sorting_impl::min_max_swap(arr[5], arr[23]);
        sorting_impl::min_max_swap(arr[6], arr[19]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[24]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[14], arr[23]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[22]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[21]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[18]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[21]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
    }
};

// Optimal network for N=26: 138 comparators, 15 layers
template <typename T> struct Sorter<T, 26> {
    static METAL_FUNC void sort(thread T (&arr)[26]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[0], arr[18]);
        sorting_impl::min_max_swap(arr[1], arr[19]);
        sorting_impl::min_max_swap(arr[2], arr[20]);
        sorting_impl::min_max_swap(arr[3], arr[21]);
        sorting_impl::min_max_swap(arr[4], arr[22]);
        sorting_impl::min_max_swap(arr[5], arr[23]);
        sorting_impl::min_max_swap(arr[6], arr[24]);
        sorting_impl::min_max_swap(arr[7], arr[25]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[14]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[3], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[20]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[22]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
    }
};

// Optimal network for N=27: 147 comparators, 16 layers
template <typename T> struct Sorter<T, 27> {
    static METAL_FUNC void sort(thread T (&arr)[27]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[0], arr[23]);
        sorting_impl::min_max_swap(arr[1], arr[24]);
        sorting_impl::min_max_swap(arr[2], arr[25]);
        sorting_impl::min_max_swap(arr[3], arr[26]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[19]);
        sorting_impl::min_max_swap(arr[3], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[22]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[24]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[26]);
        sorting_impl::min_max_swap(arr[1], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[15]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[10], arr[19]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[15]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[24]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[16], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
    }
};

// Optimal network for N=28: 155 comparators, 14 layers
template <typename T> struct Sorter<T, 28> {
    static METAL_FUNC void sort(thread T (&arr)[28]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[0], arr[20]);
        sorting_impl::min_max_swap(arr[1], arr[21]);
        sorting_impl::min_max_swap(arr[2], arr[22]);
        sorting_impl::min_max_swap(arr[3], arr[23]);
        sorting_impl::min_max_swap(arr[4], arr[24]);
        sorting_impl::min_max_swap(arr[5], arr[25]);
        sorting_impl::min_max_swap(arr[6], arr[26]);
        sorting_impl::min_max_swap(arr[7], arr[27]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[12]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[21]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[25]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[1], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[16], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
    }
};

// Optimal network for N=29: 164 comparators, 15 layers
template <typename T> struct Sorter<T, 29> {
    static METAL_FUNC void sort(thread T (&arr)[29]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[28]);
        sorting_impl::min_max_swap(arr[17], arr[26]);
        sorting_impl::min_max_swap(arr[18], arr[25]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[22]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[27]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[1], arr[8]);
        sorting_impl::min_max_swap(arr[2], arr[24]);
        sorting_impl::min_max_swap(arr[4], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[6], arr[21]);
        sorting_impl::min_max_swap(arr[7], arr[27]);
        sorting_impl::min_max_swap(arr[9], arr[18]);
        sorting_impl::min_max_swap(arr[10], arr[23]);
        sorting_impl::min_max_swap(arr[11], arr[26]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[25]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[24]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[15], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[24]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[26]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[8], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[16]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
    }
};

// Optimal network for N=30: 172 comparators, 14 layers
template <typename T> struct Sorter<T, 30> {
    static METAL_FUNC void sort(thread T (&arr)[30]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[14]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[26]);
        sorting_impl::min_max_swap(arr[13], arr[23]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[1], arr[13]);
        sorting_impl::min_max_swap(arr[2], arr[12]);
        sorting_impl::min_max_swap(arr[3], arr[15]);
        sorting_impl::min_max_swap(arr[4], arr[18]);
        sorting_impl::min_max_swap(arr[5], arr[19]);
        sorting_impl::min_max_swap(arr[6], arr[20]);
        sorting_impl::min_max_swap(arr[7], arr[21]);
        sorting_impl::min_max_swap(arr[8], arr[22]);
        sorting_impl::min_max_swap(arr[9], arr[23]);
        sorting_impl::min_max_swap(arr[10], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[25]);
        sorting_impl::min_max_swap(arr[14], arr[26]);
        sorting_impl::min_max_swap(arr[16], arr[28]);
        sorting_impl::min_max_swap(arr[17], arr[27]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[13]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[26]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[14]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[16], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[1], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[7], arr[22]);
        sorting_impl::min_max_swap(arr[9], arr[24]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[26]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[28]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
    }
};

// Optimal network for N=31: 180 comparators, 14 layers
template <typename T> struct Sorter<T, 31> {
    static METAL_FUNC void sort(thread T (&arr)[31]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[8]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[13], arr[25]);
        sorting_impl::min_max_swap(arr[14], arr[28]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[17]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[24]);
        sorting_impl::min_max_swap(arr[15], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
    }
};

// Optimal network for N=32: 185 comparators, 14 layers
template <typename T> struct Sorter<T, 32> {
    static METAL_FUNC void sort(thread T (&arr)[32]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[8]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[13], arr[25]);
        sorting_impl::min_max_swap(arr[14], arr[28]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[17]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[24]);
        sorting_impl::min_max_swap(arr[15], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
    }
};

// Optimal network for N=33: 199 comparators, 15 layers
template <typename T> struct Sorter<T, 33> {
    static METAL_FUNC void sort(thread T (&arr)[33]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[32]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[29]);
        sorting_impl::min_max_swap(arr[12], arr[21]);
        sorting_impl::min_max_swap(arr[14], arr[23]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[1], arr[8]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[24]);
        sorting_impl::min_max_swap(arr[14], arr[25]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
    }
};

// Optimal network for N=34: 209 comparators, 17 layers
template <typename T> struct Sorter<T, 34> {
    static METAL_FUNC void sort(thread T (&arr)[34]) {
        sorting_impl::min_max_swap(arr[0], arr[33]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[28]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[31]);
        sorting_impl::min_max_swap(arr[26], arr[33]);
        sorting_impl::min_max_swap(arr[0], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[21]);
        sorting_impl::min_max_swap(arr[8], arr[19]);
        sorting_impl::min_max_swap(arr[10], arr[20]);
        sorting_impl::min_max_swap(arr[12], arr[26]);
        sorting_impl::min_max_swap(arr[13], arr[23]);
        sorting_impl::min_max_swap(arr[14], arr[25]);
        sorting_impl::min_max_swap(arr[15], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[33]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[33]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[16], arr[26]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[4], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[29]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[16], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
    }
};

// Optimal network for N=35: 220 comparators, 17 layers
template <typename T> struct Sorter<T, 35> {
    static METAL_FUNC void sort(thread T (&arr)[35]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[32]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[19]);
        sorting_impl::min_max_swap(arr[14], arr[28]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[3], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[10], arr[32]);
        sorting_impl::min_max_swap(arr[13], arr[33]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[15]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[33]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[16]);
        sorting_impl::min_max_swap(arr[6], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[25], arr[32]);
        sorting_impl::min_max_swap(arr[26], arr[33]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[25]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[16]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
    }
};

// Optimal network for N=36: 227 comparators, 18 layers
template <typename T> struct Sorter<T, 36> {
    static METAL_FUNC void sort(thread T (&arr)[36]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[0], arr[34]);
        sorting_impl::min_max_swap(arr[1], arr[35]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[26]);
        sorting_impl::min_max_swap(arr[9], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[22]);
        sorting_impl::min_max_swap(arr[13], arr[23]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[24], arr[30]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[1], arr[10]);
        sorting_impl::min_max_swap(arr[2], arr[12]);
        sorting_impl::min_max_swap(arr[3], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[32]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[33]);
        sorting_impl::min_max_swap(arr[25], arr[34]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[23]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[30]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[20]);
        sorting_impl::min_max_swap(arr[9], arr[23]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[26]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[21], arr[30]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[20], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[8], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[26]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[27]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[24], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
    }
};

// Optimal network for N=37: 240 comparators, 17 layers
template <typename T> struct Sorter<T, 37> {
    static METAL_FUNC void sort(thread T (&arr)[37]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[0], arr[32]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[36]);
        sorting_impl::min_max_swap(arr[1], arr[33]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[18], arr[35]);
        sorting_impl::min_max_swap(arr[20], arr[34]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[2], arr[20]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[25]);
        sorting_impl::min_max_swap(arr[12], arr[32]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[19], arr[34]);
        sorting_impl::min_max_swap(arr[21], arr[31]);
        sorting_impl::min_max_swap(arr[28], arr[35]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[8], arr[17]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[10], arr[32]);
        sorting_impl::min_max_swap(arr[13], arr[28]);
        sorting_impl::min_max_swap(arr[14], arr[33]);
        sorting_impl::min_max_swap(arr[15], arr[35]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[19]);
        sorting_impl::min_max_swap(arr[14], arr[24]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[33]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[5], arr[16]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[17]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[21]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[32]);
        sorting_impl::min_max_swap(arr[23], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
    }
};

// Optimal network for N=38: 250 comparators, 17 layers
template <typename T> struct Sorter<T, 38> {
    static METAL_FUNC void sort(thread T (&arr)[38]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[0], arr[22]);
        sorting_impl::min_max_swap(arr[1], arr[23]);
        sorting_impl::min_max_swap(arr[2], arr[24]);
        sorting_impl::min_max_swap(arr[3], arr[25]);
        sorting_impl::min_max_swap(arr[4], arr[26]);
        sorting_impl::min_max_swap(arr[5], arr[27]);
        sorting_impl::min_max_swap(arr[6], arr[28]);
        sorting_impl::min_max_swap(arr[7], arr[29]);
        sorting_impl::min_max_swap(arr[8], arr[30]);
        sorting_impl::min_max_swap(arr[9], arr[31]);
        sorting_impl::min_max_swap(arr[10], arr[32]);
        sorting_impl::min_max_swap(arr[11], arr[33]);
        sorting_impl::min_max_swap(arr[12], arr[34]);
        sorting_impl::min_max_swap(arr[13], arr[35]);
        sorting_impl::min_max_swap(arr[14], arr[36]);
        sorting_impl::min_max_swap(arr[15], arr[37]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[34]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[4], arr[17]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[16], arr[23]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[20], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[23]);
        sorting_impl::min_max_swap(arr[14], arr[28]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[18], arr[34]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[1], arr[8]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[11], arr[22]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[26]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[11]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[35]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[27]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[25]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[31]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
    }
};

// Optimal network for N=39: 259 comparators, 17 layers
template <typename T> struct Sorter<T, 39> {
    static METAL_FUNC void sort(thread T (&arr)[39]) {
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[38]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[36]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[32]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[10]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[15], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[38]);
        sorting_impl::min_max_swap(arr[0], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[26]);
        sorting_impl::min_max_swap(arr[2], arr[25]);
        sorting_impl::min_max_swap(arr[3], arr[28]);
        sorting_impl::min_max_swap(arr[4], arr[30]);
        sorting_impl::min_max_swap(arr[5], arr[29]);
        sorting_impl::min_max_swap(arr[6], arr[27]);
        sorting_impl::min_max_swap(arr[7], arr[24]);
        sorting_impl::min_max_swap(arr[8], arr[32]);
        sorting_impl::min_max_swap(arr[9], arr[33]);
        sorting_impl::min_max_swap(arr[10], arr[34]);
        sorting_impl::min_max_swap(arr[11], arr[35]);
        sorting_impl::min_max_swap(arr[12], arr[36]);
        sorting_impl::min_max_swap(arr[13], arr[37]);
        sorting_impl::min_max_swap(arr[14], arr[31]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[9]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[25]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[24]);
        sorting_impl::min_max_swap(arr[13], arr[34]);
        sorting_impl::min_max_swap(arr[14], arr[29]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[21], arr[35]);
        sorting_impl::min_max_swap(arr[23], arr[38]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[4], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[28]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[33]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[38]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[15]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[19]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[25]);
        sorting_impl::min_max_swap(arr[13], arr[26]);
        sorting_impl::min_max_swap(arr[20], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[24], arr[34]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[15]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[8], arr[17]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[28]);
        sorting_impl::min_max_swap(arr[20], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[32]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[2], arr[7]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
    }
};

// Optimal network for N=40: 265 comparators, 17 layers
template <typename T> struct Sorter<T, 40> {
    static METAL_FUNC void sort(thread T (&arr)[40]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[0], arr[24]);
        sorting_impl::min_max_swap(arr[1], arr[25]);
        sorting_impl::min_max_swap(arr[2], arr[26]);
        sorting_impl::min_max_swap(arr[3], arr[27]);
        sorting_impl::min_max_swap(arr[4], arr[28]);
        sorting_impl::min_max_swap(arr[5], arr[29]);
        sorting_impl::min_max_swap(arr[6], arr[30]);
        sorting_impl::min_max_swap(arr[7], arr[31]);
        sorting_impl::min_max_swap(arr[8], arr[32]);
        sorting_impl::min_max_swap(arr[9], arr[33]);
        sorting_impl::min_max_swap(arr[10], arr[34]);
        sorting_impl::min_max_swap(arr[11], arr[35]);
        sorting_impl::min_max_swap(arr[12], arr[36]);
        sorting_impl::min_max_swap(arr[13], arr[37]);
        sorting_impl::min_max_swap(arr[14], arr[38]);
        sorting_impl::min_max_swap(arr[15], arr[39]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[21]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[18], arr[32]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[36]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[18]);
        sorting_impl::min_max_swap(arr[5], arr[25]);
        sorting_impl::min_max_swap(arr[7], arr[29]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[32]);
        sorting_impl::min_max_swap(arr[14], arr[34]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[35]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[21]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[29]);
        sorting_impl::min_max_swap(arr[18], arr[28]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[36]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[19]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[13], arr[25]);
        sorting_impl::min_max_swap(arr[14], arr[26]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[33]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[37]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[33]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[37]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[25], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
    }
};

// Optimal network for N=41: 282 comparators, 18 layers
template <typename T> struct Sorter<T, 41> {
    static METAL_FUNC void sort(thread T (&arr)[41]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[40]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[26]);
        sorting_impl::min_max_swap(arr[14], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[39]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[2], arr[34]);
        sorting_impl::min_max_swap(arr[3], arr[36]);
        sorting_impl::min_max_swap(arr[4], arr[35]);
        sorting_impl::min_max_swap(arr[6], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[25]);
        sorting_impl::min_max_swap(arr[12], arr[32]);
        sorting_impl::min_max_swap(arr[15], arr[39]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[26], arr[38]);
        sorting_impl::min_max_swap(arr[2], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[34]);
        sorting_impl::min_max_swap(arr[6], arr[33]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[10], arr[32]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[17], arr[35]);
        sorting_impl::min_max_swap(arr[19], arr[36]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[37]);
        sorting_impl::min_max_swap(arr[27], arr[39]);
        sorting_impl::min_max_swap(arr[28], arr[40]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[36]);
        sorting_impl::min_max_swap(arr[18], arr[33]);
        sorting_impl::min_max_swap(arr[20], arr[34]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[28], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[40]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[13], arr[34]);
        sorting_impl::min_max_swap(arr[14], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[37]);
        sorting_impl::min_max_swap(arr[28], arr[35]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[31], arr[40]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[21]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[15], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[36]);
        sorting_impl::min_max_swap(arr[25], arr[34]);
        sorting_impl::min_max_swap(arr[26], arr[33]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
    }
};

// Optimal network for N=42: 291 comparators, 18 layers
template <typename T> struct Sorter<T, 42> {
    static METAL_FUNC void sort(thread T (&arr)[42]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[32], arr[40]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[0], arr[26]);
        sorting_impl::min_max_swap(arr[1], arr[27]);
        sorting_impl::min_max_swap(arr[2], arr[28]);
        sorting_impl::min_max_swap(arr[3], arr[29]);
        sorting_impl::min_max_swap(arr[4], arr[30]);
        sorting_impl::min_max_swap(arr[5], arr[31]);
        sorting_impl::min_max_swap(arr[6], arr[32]);
        sorting_impl::min_max_swap(arr[7], arr[33]);
        sorting_impl::min_max_swap(arr[8], arr[34]);
        sorting_impl::min_max_swap(arr[9], arr[35]);
        sorting_impl::min_max_swap(arr[10], arr[36]);
        sorting_impl::min_max_swap(arr[11], arr[37]);
        sorting_impl::min_max_swap(arr[12], arr[38]);
        sorting_impl::min_max_swap(arr[13], arr[39]);
        sorting_impl::min_max_swap(arr[14], arr[40]);
        sorting_impl::min_max_swap(arr[15], arr[41]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[38]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[15], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[26]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[37]);
        sorting_impl::min_max_swap(arr[28], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[26]);
        sorting_impl::min_max_swap(arr[8], arr[19]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[12], arr[27]);
        sorting_impl::min_max_swap(arr[14], arr[29]);
        sorting_impl::min_max_swap(arr[15], arr[36]);
        sorting_impl::min_max_swap(arr[18], arr[30]);
        sorting_impl::min_max_swap(arr[21], arr[38]);
        sorting_impl::min_max_swap(arr[22], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[25], arr[39]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[26]);
        sorting_impl::min_max_swap(arr[8], arr[17]);
        sorting_impl::min_max_swap(arr[9], arr[30]);
        sorting_impl::min_max_swap(arr[10], arr[19]);
        sorting_impl::min_max_swap(arr[11], arr[32]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[34]);
        sorting_impl::min_max_swap(arr[16], arr[25]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[31]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[24], arr[33]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[28]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[30]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[34]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[24], arr[31]);
        sorting_impl::min_max_swap(arr[25], arr[35]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
    }
};

// Optimal network for N=43: 303 comparators, 19 layers
template <typename T> struct Sorter<T, 43> {
    static METAL_FUNC void sort(thread T (&arr)[43]) {
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[42]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[40]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[36]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[10]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[35], arr[42]);
        sorting_impl::min_max_swap(arr[0], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[30]);
        sorting_impl::min_max_swap(arr[2], arr[29]);
        sorting_impl::min_max_swap(arr[3], arr[32]);
        sorting_impl::min_max_swap(arr[4], arr[34]);
        sorting_impl::min_max_swap(arr[5], arr[33]);
        sorting_impl::min_max_swap(arr[6], arr[31]);
        sorting_impl::min_max_swap(arr[7], arr[28]);
        sorting_impl::min_max_swap(arr[8], arr[36]);
        sorting_impl::min_max_swap(arr[9], arr[37]);
        sorting_impl::min_max_swap(arr[10], arr[38]);
        sorting_impl::min_max_swap(arr[11], arr[39]);
        sorting_impl::min_max_swap(arr[12], arr[40]);
        sorting_impl::min_max_swap(arr[13], arr[41]);
        sorting_impl::min_max_swap(arr[14], arr[35]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[42]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[4], arr[9]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[38]);
        sorting_impl::min_max_swap(arr[34], arr[37]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[27], arr[40]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[20]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[21]);
        sorting_impl::min_max_swap(arr[13], arr[25]);
        sorting_impl::min_max_swap(arr[14], arr[26]);
        sorting_impl::min_max_swap(arr[17], arr[28]);
        sorting_impl::min_max_swap(arr[18], arr[29]);
        sorting_impl::min_max_swap(arr[19], arr[31]);
        sorting_impl::min_max_swap(arr[22], arr[32]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[7]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[5], arr[22]);
        sorting_impl::min_max_swap(arr[6], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[23]);
        sorting_impl::min_max_swap(arr[13], arr[28]);
        sorting_impl::min_max_swap(arr[14], arr[29]);
        sorting_impl::min_max_swap(arr[20], arr[30]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[24], arr[36]);
        sorting_impl::min_max_swap(arr[25], arr[39]);
        sorting_impl::min_max_swap(arr[26], arr[41]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[35], arr[40]);
        sorting_impl::min_max_swap(arr[3], arr[15]);
        sorting_impl::min_max_swap(arr[5], arr[18]);
        sorting_impl::min_max_swap(arr[6], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[37]);
        sorting_impl::min_max_swap(arr[26], arr[36]);
        sorting_impl::min_max_swap(arr[27], arr[33]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[15]);
        sorting_impl::min_max_swap(arr[4], arr[11]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[12], arr[27]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[30]);
        sorting_impl::min_max_swap(arr[21], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[29]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[6], arr[15]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[27]);
        sorting_impl::min_max_swap(arr[16], arr[29]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[28], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[15]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[21]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[33], arr[38]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
    }
};

// Optimal network for N=44: 309 comparators, 19 layers
template <typename T> struct Sorter<T, 44> {
    static METAL_FUNC void sort(thread T (&arr)[44]) {
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[32], arr[40]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[0], arr[28]);
        sorting_impl::min_max_swap(arr[1], arr[29]);
        sorting_impl::min_max_swap(arr[2], arr[30]);
        sorting_impl::min_max_swap(arr[3], arr[31]);
        sorting_impl::min_max_swap(arr[4], arr[32]);
        sorting_impl::min_max_swap(arr[5], arr[33]);
        sorting_impl::min_max_swap(arr[6], arr[34]);
        sorting_impl::min_max_swap(arr[7], arr[35]);
        sorting_impl::min_max_swap(arr[8], arr[36]);
        sorting_impl::min_max_swap(arr[9], arr[37]);
        sorting_impl::min_max_swap(arr[10], arr[38]);
        sorting_impl::min_max_swap(arr[11], arr[39]);
        sorting_impl::min_max_swap(arr[12], arr[40]);
        sorting_impl::min_max_swap(arr[13], arr[41]);
        sorting_impl::min_max_swap(arr[14], arr[42]);
        sorting_impl::min_max_swap(arr[15], arr[43]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[40]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[38]);
        sorting_impl::min_max_swap(arr[34], arr[37]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[16], arr[28]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[2], arr[28]);
        sorting_impl::min_max_swap(arr[7], arr[21]);
        sorting_impl::min_max_swap(arr[8], arr[20]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[13], arr[26]);
        sorting_impl::min_max_swap(arr[14], arr[25]);
        sorting_impl::min_max_swap(arr[15], arr[41]);
        sorting_impl::min_max_swap(arr[17], arr[30]);
        sorting_impl::min_max_swap(arr[18], arr[29]);
        sorting_impl::min_max_swap(arr[19], arr[31]);
        sorting_impl::min_max_swap(arr[22], arr[36]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[18]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[25], arr[39]);
        sorting_impl::min_max_swap(arr[26], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[33]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[24], arr[36]);
        sorting_impl::min_max_swap(arr[25], arr[37]);
        sorting_impl::min_max_swap(arr[26], arr[40]);
        sorting_impl::min_max_swap(arr[27], arr[39]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[29]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[41]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[27], arr[40]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[21]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[22], arr[32]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[37]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
    }
};

// Optimal network for N=45: 324 comparators, 19 layers
template <typename T> struct Sorter<T, 45> {
    static METAL_FUNC void sort(thread T (&arr)[45]) {
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[13], arr[32]);
        sorting_impl::min_max_swap(arr[14], arr[35]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[28]);
        sorting_impl::min_max_swap(arr[19], arr[30]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[44]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[37]);
        sorting_impl::min_max_swap(arr[14], arr[36]);
        sorting_impl::min_max_swap(arr[15], arr[25]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[31], arr[41]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[40]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[13], arr[33]);
        sorting_impl::min_max_swap(arr[14], arr[31]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[44]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[37], arr[43]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[44]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[0], arr[13]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[14], arr[32]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[26], arr[38]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[1], arr[14]);
        sorting_impl::min_max_swap(arr[2], arr[31]);
        sorting_impl::min_max_swap(arr[3], arr[33]);
        sorting_impl::min_max_swap(arr[5], arr[35]);
        sorting_impl::min_max_swap(arr[8], arr[21]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[39]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[38]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[18], arr[32]);
        sorting_impl::min_max_swap(arr[22], arr[34]);
        sorting_impl::min_max_swap(arr[23], arr[36]);
        sorting_impl::min_max_swap(arr[28], arr[41]);
        sorting_impl::min_max_swap(arr[29], arr[43]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[4], arr[18]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[36]);
        sorting_impl::min_max_swap(arr[8], arr[37]);
        sorting_impl::min_max_swap(arr[12], arr[26]);
        sorting_impl::min_max_swap(arr[17], arr[31]);
        sorting_impl::min_max_swap(arr[19], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[39]);
        sorting_impl::min_max_swap(arr[25], arr[40]);
        sorting_impl::min_max_swap(arr[27], arr[42]);
        sorting_impl::min_max_swap(arr[2], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[13]);
        sorting_impl::min_max_swap(arr[5], arr[15]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[19]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[18], arr[32]);
        sorting_impl::min_max_swap(arr[20], arr[35]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[34]);
        sorting_impl::min_max_swap(arr[26], arr[36]);
        sorting_impl::min_max_swap(arr[30], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[31]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[37]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[31]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[16], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[38]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[37]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[35]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[10], arr[25]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[35]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[34]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
    }
};

// Optimal network for N=46: 332 comparators, 19 layers
template <typename T> struct Sorter<T, 46> {
    static METAL_FUNC void sort(thread T (&arr)[46]) {
        sorting_impl::min_max_swap(arr[2], arr[13]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[14], arr[35]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[28]);
        sorting_impl::min_max_swap(arr[19], arr[30]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[45]);
        sorting_impl::min_max_swap(arr[33], arr[44]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[36]);
        sorting_impl::min_max_swap(arr[15], arr[25]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[31], arr[41]);
        sorting_impl::min_max_swap(arr[32], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[40]);
        sorting_impl::min_max_swap(arr[38], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[31]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[43]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[14], arr[32]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[43]);
        sorting_impl::min_max_swap(arr[38], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[42], arr[45]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[45]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[40]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[0], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[26], arr[40]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[1], arr[31]);
        sorting_impl::min_max_swap(arr[2], arr[32]);
        sorting_impl::min_max_swap(arr[3], arr[33]);
        sorting_impl::min_max_swap(arr[5], arr[36]);
        sorting_impl::min_max_swap(arr[8], arr[21]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[39]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[40]);
        sorting_impl::min_max_swap(arr[13], arr[42]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[18], arr[34]);
        sorting_impl::min_max_swap(arr[22], arr[35]);
        sorting_impl::min_max_swap(arr[23], arr[38]);
        sorting_impl::min_max_swap(arr[29], arr[44]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[4], arr[18]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[38]);
        sorting_impl::min_max_swap(arr[8], arr[37]);
        sorting_impl::min_max_swap(arr[12], arr[26]);
        sorting_impl::min_max_swap(arr[13], arr[28]);
        sorting_impl::min_max_swap(arr[17], arr[32]);
        sorting_impl::min_max_swap(arr[19], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[39]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[2], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[14]);
        sorting_impl::min_max_swap(arr[5], arr[15]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[19]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[16], arr[31]);
        sorting_impl::min_max_swap(arr[18], arr[34]);
        sorting_impl::min_max_swap(arr[20], arr[36]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[35]);
        sorting_impl::min_max_swap(arr[26], arr[38]);
        sorting_impl::min_max_swap(arr[28], arr[42]);
        sorting_impl::min_max_swap(arr[30], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[14]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[32]);
        sorting_impl::min_max_swap(arr[9], arr[31]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[37]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[29], arr[35]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[40], arr[43]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[32]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[13], arr[34]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[37]);
        sorting_impl::min_max_swap(arr[28], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[34]);
        sorting_impl::min_max_swap(arr[25], arr[36]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[25]);
        sorting_impl::min_max_swap(arr[11], arr[21]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[36]);
        sorting_impl::min_max_swap(arr[24], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[38], arr[41]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
    }
};

// Optimal network for N=47: 340 comparators, 19 layers
template <typename T> struct Sorter<T, 47> {
    static METAL_FUNC void sort(thread T (&arr)[47]) {
        sorting_impl::min_max_swap(arr[1], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[13]);
        sorting_impl::min_max_swap(arr[3], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[28]);
        sorting_impl::min_max_swap(arr[19], arr[30]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[45]);
        sorting_impl::min_max_swap(arr[33], arr[44]);
        sorting_impl::min_max_swap(arr[35], arr[46]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[15], arr[25]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[31], arr[41]);
        sorting_impl::min_max_swap(arr[32], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[38], arr[45]);
        sorting_impl::min_max_swap(arr[40], arr[46]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[43]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[46]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[42]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[0], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[26], arr[42]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[1], arr[32]);
        sorting_impl::min_max_swap(arr[2], arr[33]);
        sorting_impl::min_max_swap(arr[3], arr[35]);
        sorting_impl::min_max_swap(arr[5], arr[36]);
        sorting_impl::min_max_swap(arr[8], arr[21]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[40]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[42]);
        sorting_impl::min_max_swap(arr[13], arr[44]);
        sorting_impl::min_max_swap(arr[14], arr[45]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[18], arr[34]);
        sorting_impl::min_max_swap(arr[22], arr[38]);
        sorting_impl::min_max_swap(arr[23], arr[39]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[4], arr[18]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[39]);
        sorting_impl::min_max_swap(arr[8], arr[37]);
        sorting_impl::min_max_swap(arr[12], arr[26]);
        sorting_impl::min_max_swap(arr[13], arr[28]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[19], arr[35]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[2], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[15]);
        sorting_impl::min_max_swap(arr[5], arr[31]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[19]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[14], arr[29]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[18], arr[34]);
        sorting_impl::min_max_swap(arr[20], arr[36]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[38]);
        sorting_impl::min_max_swap(arr[26], arr[39]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[30], arr[40]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[15]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[33]);
        sorting_impl::min_max_swap(arr[9], arr[32]);
        sorting_impl::min_max_swap(arr[12], arr[31]);
        sorting_impl::min_max_swap(arr[13], arr[37]);
        sorting_impl::min_max_swap(arr[14], arr[38]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[29], arr[41]);
        sorting_impl::min_max_swap(arr[30], arr[35]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[33]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[13], arr[34]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[31]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[24], arr[42]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[37]);
        sorting_impl::min_max_swap(arr[28], arr[35]);
        sorting_impl::min_max_swap(arr[29], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[31]);
        sorting_impl::min_max_swap(arr[11], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[32]);
        sorting_impl::min_max_swap(arr[24], arr[34]);
        sorting_impl::min_max_swap(arr[25], arr[36]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[42]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[25]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[31], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[26], arr[31]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[31]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
    }
};

// Optimal network for N=48: 346 comparators, 19 layers
template <typename T> struct Sorter<T, 48> {
    static METAL_FUNC void sort(thread T (&arr)[48]) {
        sorting_impl::min_max_swap(arr[0], arr[13]);
        sorting_impl::min_max_swap(arr[1], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[16], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[28]);
        sorting_impl::min_max_swap(arr[18], arr[31]);
        sorting_impl::min_max_swap(arr[19], arr[30]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[32], arr[45]);
        sorting_impl::min_max_swap(arr[33], arr[44]);
        sorting_impl::min_max_swap(arr[34], arr[47]);
        sorting_impl::min_max_swap(arr[35], arr[46]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[25]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[31]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[32], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[41]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[38], arr[45]);
        sorting_impl::min_max_swap(arr[40], arr[46]);
        sorting_impl::min_max_swap(arr[42], arr[47]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[42]);
        sorting_impl::min_max_swap(arr[37], arr[43]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[44]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[31], arr[47]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[1], arr[33]);
        sorting_impl::min_max_swap(arr[2], arr[34]);
        sorting_impl::min_max_swap(arr[3], arr[35]);
        sorting_impl::min_max_swap(arr[5], arr[37]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[42]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[44]);
        sorting_impl::min_max_swap(arr[13], arr[45]);
        sorting_impl::min_max_swap(arr[14], arr[46]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[20], arr[36]);
        sorting_impl::min_max_swap(arr[22], arr[38]);
        sorting_impl::min_max_swap(arr[23], arr[39]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[39]);
        sorting_impl::min_max_swap(arr[8], arr[40]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[18], arr[34]);
        sorting_impl::min_max_swap(arr[19], arr[35]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[26], arr[42]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[30], arr[46]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[32]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[19]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[42]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[20], arr[36]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[38]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[28], arr[39]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[31], arr[43]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[16]);
        sorting_impl::min_max_swap(arr[6], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[34]);
        sorting_impl::min_max_swap(arr[9], arr[33]);
        sorting_impl::min_max_swap(arr[12], arr[32]);
        sorting_impl::min_max_swap(arr[13], arr[40]);
        sorting_impl::min_max_swap(arr[14], arr[38]);
        sorting_impl::min_max_swap(arr[15], arr[35]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[41]);
        sorting_impl::min_max_swap(arr[31], arr[44]);
        sorting_impl::min_max_swap(arr[42], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[20]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[34]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[36]);
        sorting_impl::min_max_swap(arr[14], arr[24]);
        sorting_impl::min_max_swap(arr[15], arr[25]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[32]);
        sorting_impl::min_max_swap(arr[23], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[31]);
        sorting_impl::min_max_swap(arr[27], arr[40]);
        sorting_impl::min_max_swap(arr[29], arr[35]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[32]);
        sorting_impl::min_max_swap(arr[11], arr[21]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[23]);
        sorting_impl::min_max_swap(arr[15], arr[37]);
        sorting_impl::min_max_swap(arr[24], arr[33]);
        sorting_impl::min_max_swap(arr[25], arr[34]);
        sorting_impl::min_max_swap(arr[26], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[40]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[34]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[35], arr[40]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[22], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[33]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
    }
};

// Optimal network for N=49: 365 comparators, 21 layers
template <typename T> struct Sorter<T, 49> {
    static METAL_FUNC void sort(thread T (&arr)[49]) {
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[16], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[34]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[36], arr[48]);
        sorting_impl::min_max_swap(arr[37], arr[46]);
        sorting_impl::min_max_swap(arr[38], arr[45]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[41], arr[47]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[42]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[47]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[45]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[0], arr[24]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[41]);
        sorting_impl::min_max_swap(arr[39], arr[44]);
        sorting_impl::min_max_swap(arr[40], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[47]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[1], arr[13]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[12], arr[36]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[47]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[0], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[11], arr[35]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[23], arr[47]);
        sorting_impl::min_max_swap(arr[24], arr[36]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[34], arr[46]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[34]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[46]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[25], arr[37]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[1], arr[25]);
        sorting_impl::min_max_swap(arr[3], arr[15]);
        sorting_impl::min_max_swap(arr[4], arr[28]);
        sorting_impl::min_max_swap(arr[5], arr[29]);
        sorting_impl::min_max_swap(arr[6], arr[30]);
        sorting_impl::min_max_swap(arr[7], arr[31]);
        sorting_impl::min_max_swap(arr[8], arr[32]);
        sorting_impl::min_max_swap(arr[13], arr[37]);
        sorting_impl::min_max_swap(arr[19], arr[43]);
        sorting_impl::min_max_swap(arr[20], arr[48]);
        sorting_impl::min_max_swap(arr[22], arr[34]);
        sorting_impl::min_max_swap(arr[26], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[45]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[2], arr[26]);
        sorting_impl::min_max_swap(arr[4], arr[40]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[20]);
        sorting_impl::min_max_swap(arr[9], arr[33]);
        sorting_impl::min_max_swap(arr[13], arr[25]);
        sorting_impl::min_max_swap(arr[14], arr[38]);
        sorting_impl::min_max_swap(arr[16], arr[28]);
        sorting_impl::min_max_swap(arr[17], arr[41]);
        sorting_impl::min_max_swap(arr[18], arr[42]);
        sorting_impl::min_max_swap(arr[21], arr[45]);
        sorting_impl::min_max_swap(arr[27], arr[39]);
        sorting_impl::min_max_swap(arr[31], arr[43]);
        sorting_impl::min_max_swap(arr[32], arr[48]);
        sorting_impl::min_max_swap(arr[3], arr[27]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[37]);
        sorting_impl::min_max_swap(arr[10], arr[38]);
        sorting_impl::min_max_swap(arr[14], arr[26]);
        sorting_impl::min_max_swap(arr[15], arr[39]);
        sorting_impl::min_max_swap(arr[19], arr[31]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[33]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[29], arr[41]);
        sorting_impl::min_max_swap(arr[30], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[28]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[39]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[16], arr[36]);
        sorting_impl::min_max_swap(arr[17], arr[29]);
        sorting_impl::min_max_swap(arr[18], arr[30]);
        sorting_impl::min_max_swap(arr[20], arr[40]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[38]);
        sorting_impl::min_max_swap(arr[32], arr[44]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[39]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[40]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[42], arr[48]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[38], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[48]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[45]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[33]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
    }
};

// Optimal network for N=50: 376 comparators, 21 layers
template <typename T> struct Sorter<T, 50> {
    static METAL_FUNC void sort(thread T (&arr)[50]) {
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[29], arr[35]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[37], arr[49]);
        sorting_impl::min_max_swap(arr[38], arr[47]);
        sorting_impl::min_max_swap(arr[39], arr[46]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[42], arr[48]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[23]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[38], arr[43]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[48]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[0], arr[25]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[42]);
        sorting_impl::min_max_swap(arr[40], arr[45]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[48]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[12], arr[37]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[48]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[0], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[36]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[23], arr[48]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[35], arr[47]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[1], arr[13]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[35]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[47]);
        sorting_impl::min_max_swap(arr[23], arr[36]);
        sorting_impl::min_max_swap(arr[26], arr[38]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[1], arr[26]);
        sorting_impl::min_max_swap(arr[2], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[29]);
        sorting_impl::min_max_swap(arr[5], arr[30]);
        sorting_impl::min_max_swap(arr[6], arr[31]);
        sorting_impl::min_max_swap(arr[7], arr[32]);
        sorting_impl::min_max_swap(arr[8], arr[49]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[13], arr[38]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[44]);
        sorting_impl::min_max_swap(arr[20], arr[45]);
        sorting_impl::min_max_swap(arr[22], arr[35]);
        sorting_impl::min_max_swap(arr[24], arr[33]);
        sorting_impl::min_max_swap(arr[27], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[46]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[2], arr[27]);
        sorting_impl::min_max_swap(arr[3], arr[15]);
        sorting_impl::min_max_swap(arr[4], arr[37]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[34]);
        sorting_impl::min_max_swap(arr[13], arr[26]);
        sorting_impl::min_max_swap(arr[14], arr[39]);
        sorting_impl::min_max_swap(arr[16], arr[41]);
        sorting_impl::min_max_swap(arr[17], arr[42]);
        sorting_impl::min_max_swap(arr[18], arr[43]);
        sorting_impl::min_max_swap(arr[21], arr[46]);
        sorting_impl::min_max_swap(arr[28], arr[40]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[32], arr[44]);
        sorting_impl::min_max_swap(arr[33], arr[49]);
        sorting_impl::min_max_swap(arr[3], arr[28]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[38]);
        sorting_impl::min_max_swap(arr[10], arr[39]);
        sorting_impl::min_max_swap(arr[14], arr[27]);
        sorting_impl::min_max_swap(arr[15], arr[40]);
        sorting_impl::min_max_swap(arr[16], arr[25]);
        sorting_impl::min_max_swap(arr[19], arr[32]);
        sorting_impl::min_max_swap(arr[20], arr[29]);
        sorting_impl::min_max_swap(arr[21], arr[34]);
        sorting_impl::min_max_swap(arr[24], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[42]);
        sorting_impl::min_max_swap(arr[31], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[44]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[26]);
        sorting_impl::min_max_swap(arr[10], arr[27]);
        sorting_impl::min_max_swap(arr[11], arr[40]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[17], arr[30]);
        sorting_impl::min_max_swap(arr[18], arr[31]);
        sorting_impl::min_max_swap(arr[21], arr[38]);
        sorting_impl::min_max_swap(arr[22], arr[39]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[45]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[25]);
        sorting_impl::min_max_swap(arr[17], arr[26]);
        sorting_impl::min_max_swap(arr[18], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[29]);
        sorting_impl::min_max_swap(arr[21], arr[30]);
        sorting_impl::min_max_swap(arr[22], arr[31]);
        sorting_impl::min_max_swap(arr[23], arr[40]);
        sorting_impl::min_max_swap(arr[24], arr[41]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[24], arr[29]);
        sorting_impl::min_max_swap(arr[25], arr[37]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[46]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[42]);
        sorting_impl::min_max_swap(arr[40], arr[43]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
    }
};

// Optimal network for N=51: 387 comparators, 22 layers
template <typename T> struct Sorter<T, 51> {
    static METAL_FUNC void sort(thread T (&arr)[51]) {
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[25], arr[37]);
        sorting_impl::min_max_swap(arr[26], arr[35]);
        sorting_impl::min_max_swap(arr[27], arr[34]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[38], arr[50]);
        sorting_impl::min_max_swap(arr[39], arr[48]);
        sorting_impl::min_max_swap(arr[40], arr[47]);
        sorting_impl::min_max_swap(arr[41], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[49]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[23]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[26], arr[31]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[39], arr[44]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[49]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[47]);
        sorting_impl::min_max_swap(arr[46], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[33]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[50]);
        sorting_impl::min_max_swap(arr[38], arr[43]);
        sorting_impl::min_max_swap(arr[41], arr[46]);
        sorting_impl::min_max_swap(arr[42], arr[45]);
        sorting_impl::min_max_swap(arr[44], arr[49]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[12], arr[38]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[49]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[36]);
        sorting_impl::min_max_swap(arr[12], arr[25]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[23], arr[49]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[48]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[1], arr[13]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[35]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[48]);
        sorting_impl::min_max_swap(arr[23], arr[36]);
        sorting_impl::min_max_swap(arr[26], arr[39]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[1], arr[26]);
        sorting_impl::min_max_swap(arr[2], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[33]);
        sorting_impl::min_max_swap(arr[7], arr[32]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[13], arr[39]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[45]);
        sorting_impl::min_max_swap(arr[20], arr[46]);
        sorting_impl::min_max_swap(arr[22], arr[35]);
        sorting_impl::min_max_swap(arr[27], arr[40]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[34], arr[47]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[0], arr[29]);
        sorting_impl::min_max_swap(arr[2], arr[27]);
        sorting_impl::min_max_swap(arr[3], arr[15]);
        sorting_impl::min_max_swap(arr[4], arr[38]);
        sorting_impl::min_max_swap(arr[5], arr[30]);
        sorting_impl::min_max_swap(arr[6], arr[31]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[37]);
        sorting_impl::min_max_swap(arr[9], arr[34]);
        sorting_impl::min_max_swap(arr[13], arr[26]);
        sorting_impl::min_max_swap(arr[14], arr[40]);
        sorting_impl::min_max_swap(arr[16], arr[42]);
        sorting_impl::min_max_swap(arr[17], arr[43]);
        sorting_impl::min_max_swap(arr[18], arr[44]);
        sorting_impl::min_max_swap(arr[20], arr[25]);
        sorting_impl::min_max_swap(arr[21], arr[47]);
        sorting_impl::min_max_swap(arr[24], arr[50]);
        sorting_impl::min_max_swap(arr[28], arr[41]);
        sorting_impl::min_max_swap(arr[32], arr[45]);
        sorting_impl::min_max_swap(arr[33], arr[46]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[28]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[39]);
        sorting_impl::min_max_swap(arr[10], arr[40]);
        sorting_impl::min_max_swap(arr[14], arr[27]);
        sorting_impl::min_max_swap(arr[15], arr[41]);
        sorting_impl::min_max_swap(arr[19], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[34]);
        sorting_impl::min_max_swap(arr[24], arr[37]);
        sorting_impl::min_max_swap(arr[29], arr[42]);
        sorting_impl::min_max_swap(arr[30], arr[43]);
        sorting_impl::min_max_swap(arr[31], arr[44]);
        sorting_impl::min_max_swap(arr[33], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[45]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[0], arr[12]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[29]);
        sorting_impl::min_max_swap(arr[9], arr[26]);
        sorting_impl::min_max_swap(arr[10], arr[27]);
        sorting_impl::min_max_swap(arr[11], arr[41]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[17], arr[30]);
        sorting_impl::min_max_swap(arr[18], arr[31]);
        sorting_impl::min_max_swap(arr[21], arr[39]);
        sorting_impl::min_max_swap(arr[22], arr[40]);
        sorting_impl::min_max_swap(arr[24], arr[42]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[43]);
        sorting_impl::min_max_swap(arr[35], arr[44]);
        sorting_impl::min_max_swap(arr[37], arr[46]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[26]);
        sorting_impl::min_max_swap(arr[18], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[25]);
        sorting_impl::min_max_swap(arr[21], arr[30]);
        sorting_impl::min_max_swap(arr[22], arr[31]);
        sorting_impl::min_max_swap(arr[23], arr[41]);
        sorting_impl::min_max_swap(arr[33], arr[38]);
        sorting_impl::min_max_swap(arr[34], arr[39]);
        sorting_impl::min_max_swap(arr[35], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[42]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[24], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[45]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[20]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[24], arr[33]);
        sorting_impl::min_max_swap(arr[29], arr[38]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[41], arr[47]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[28], arr[34]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[43]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
    }
};

// Optimal network for N=52: 395 comparators, 20 layers
template <typename T> struct Sorter<T, 52> {
    static METAL_FUNC void sort(thread T (&arr)[52]) {
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[0], arr[48]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[51]);
        sorting_impl::min_max_swap(arr[4], arr[40]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[31]);
        sorting_impl::min_max_swap(arr[8], arr[36]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[47]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[43]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[44]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[39]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[1], arr[49]);
        sorting_impl::min_max_swap(arr[2], arr[50]);
        sorting_impl::min_max_swap(arr[4], arr[24]);
        sorting_impl::min_max_swap(arr[5], arr[41]);
        sorting_impl::min_max_swap(arr[6], arr[30]);
        sorting_impl::min_max_swap(arr[7], arr[35]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[37]);
        sorting_impl::min_max_swap(arr[10], arr[46]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[42]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[16], arr[44]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[45]);
        sorting_impl::min_max_swap(arr[22], arr[38]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[27], arr[47]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[25]);
        sorting_impl::min_max_swap(arr[6], arr[34]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[45]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[26], arr[46]);
        sorting_impl::min_max_swap(arr[27], arr[39]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[35], arr[51]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[47]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[25]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[36]);
        sorting_impl::min_max_swap(arr[26], arr[38]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[44]);
        sorting_impl::min_max_swap(arr[34], arr[50]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[48]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[49]);
        sorting_impl::min_max_swap(arr[0], arr[20]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[27]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[32]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[16], arr[28]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[19], arr[39]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[24], arr[44]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[51]);
        sorting_impl::min_max_swap(arr[33], arr[45]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[49]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[26]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[33]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[17], arr[29]);
        sorting_impl::min_max_swap(arr[18], arr[38]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[34]);
        sorting_impl::min_max_swap(arr[24], arr[36]);
        sorting_impl::min_max_swap(arr[25], arr[45]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[30], arr[50]);
        sorting_impl::min_max_swap(arr[31], arr[43]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[47], arr[51]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[26]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[37]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[47]);
        sorting_impl::min_max_swap(arr[41], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[50]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[46]);
        sorting_impl::min_max_swap(arr[43], arr[47]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[40]);
        sorting_impl::min_max_swap(arr[11], arr[41]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[2], arr[32]);
        sorting_impl::min_max_swap(arr[7], arr[36]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[40]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[44]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[49]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[33]);
        sorting_impl::min_max_swap(arr[5], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[24]);
        sorting_impl::min_max_swap(arr[10], arr[32]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[18], arr[48]);
        sorting_impl::min_max_swap(arr[19], arr[41]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[42]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[50]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[46]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[6], arr[21]);
        sorting_impl::min_max_swap(arr[11], arr[25]);
        sorting_impl::min_max_swap(arr[13], arr[28]);
        sorting_impl::min_max_swap(arr[15], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[32]);
        sorting_impl::min_max_swap(arr[19], arr[34]);
        sorting_impl::min_max_swap(arr[22], arr[36]);
        sorting_impl::min_max_swap(arr[23], arr[38]);
        sorting_impl::min_max_swap(arr[26], arr[40]);
        sorting_impl::min_max_swap(arr[30], arr[45]);
        sorting_impl::min_max_swap(arr[33], arr[48]);
        sorting_impl::min_max_swap(arr[35], arr[49]);
        sorting_impl::min_max_swap(arr[47], arr[50]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[24]);
        sorting_impl::min_max_swap(arr[6], arr[20]);
        sorting_impl::min_max_swap(arr[7], arr[21]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[28]);
        sorting_impl::min_max_swap(arr[18], arr[32]);
        sorting_impl::min_max_swap(arr[19], arr[33]);
        sorting_impl::min_max_swap(arr[23], arr[37]);
        sorting_impl::min_max_swap(arr[27], arr[48]);
        sorting_impl::min_max_swap(arr[30], arr[44]);
        sorting_impl::min_max_swap(arr[31], arr[45]);
        sorting_impl::min_max_swap(arr[34], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[43], arr[49]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[16]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[20]);
        sorting_impl::min_max_swap(arr[11], arr[24]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[36]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[40]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[44]);
        sorting_impl::min_max_swap(arr[35], arr[48]);
        sorting_impl::min_max_swap(arr[39], arr[45]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[25], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[44]);
        sorting_impl::min_max_swap(arr[42], arr[48]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[48]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
    }
};

// Optimal network for N=53: 411 comparators, 22 layers
template <typename T> struct Sorter<T, 53> {
    static METAL_FUNC void sort(thread T (&arr)[53]) {
        sorting_impl::min_max_swap(arr[0], arr[12]);
        sorting_impl::min_max_swap(arr[1], arr[10]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[13], arr[25]);
        sorting_impl::min_max_swap(arr[14], arr[23]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[26], arr[38]);
        sorting_impl::min_max_swap(arr[27], arr[36]);
        sorting_impl::min_max_swap(arr[28], arr[35]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[37]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[39], arr[45]);
        sorting_impl::min_max_swap(arr[40], arr[50]);
        sorting_impl::min_max_swap(arr[41], arr[51]);
        sorting_impl::min_max_swap(arr[42], arr[49]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[46], arr[52]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[43], arr[47]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[45], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[52]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[48]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[43], arr[50]);
        sorting_impl::min_max_swap(arr[45], arr[49]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[38]);
        sorting_impl::min_max_swap(arr[26], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[37]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[50]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[0], arr[26]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[24]);
        sorting_impl::min_max_swap(arr[13], arr[39]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[0], arr[13]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[23]);
        sorting_impl::min_max_swap(arr[12], arr[51]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[26], arr[39]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[1], arr[27]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[25]);
        sorting_impl::min_max_swap(arr[13], arr[26]);
        sorting_impl::min_max_swap(arr[14], arr[40]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[50]);
        sorting_impl::min_max_swap(arr[38], arr[51]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[1], arr[14]);
        sorting_impl::min_max_swap(arr[2], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[33]);
        sorting_impl::min_max_swap(arr[8], arr[34]);
        sorting_impl::min_max_swap(arr[9], arr[35]);
        sorting_impl::min_max_swap(arr[11], arr[37]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[22], arr[52]);
        sorting_impl::min_max_swap(arr[24], arr[50]);
        sorting_impl::min_max_swap(arr[25], arr[38]);
        sorting_impl::min_max_swap(arr[27], arr[40]);
        sorting_impl::min_max_swap(arr[28], arr[41]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[2], arr[28]);
        sorting_impl::min_max_swap(arr[3], arr[16]);
        sorting_impl::min_max_swap(arr[4], arr[43]);
        sorting_impl::min_max_swap(arr[5], arr[31]);
        sorting_impl::min_max_swap(arr[6], arr[32]);
        sorting_impl::min_max_swap(arr[9], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[27]);
        sorting_impl::min_max_swap(arr[15], arr[41]);
        sorting_impl::min_max_swap(arr[17], arr[30]);
        sorting_impl::min_max_swap(arr[19], arr[45]);
        sorting_impl::min_max_swap(arr[20], arr[46]);
        sorting_impl::min_max_swap(arr[21], arr[47]);
        sorting_impl::min_max_swap(arr[24], arr[37]);
        sorting_impl::min_max_swap(arr[29], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[52]);
        sorting_impl::min_max_swap(arr[36], arr[49]);
        sorting_impl::min_max_swap(arr[3], arr[29]);
        sorting_impl::min_max_swap(arr[4], arr[17]);
        sorting_impl::min_max_swap(arr[5], arr[44]);
        sorting_impl::min_max_swap(arr[6], arr[19]);
        sorting_impl::min_max_swap(arr[7], arr[20]);
        sorting_impl::min_max_swap(arr[8], arr[21]);
        sorting_impl::min_max_swap(arr[10], arr[36]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[42]);
        sorting_impl::min_max_swap(arr[18], arr[31]);
        sorting_impl::min_max_swap(arr[22], arr[35]);
        sorting_impl::min_max_swap(arr[23], arr[49]);
        sorting_impl::min_max_swap(arr[30], arr[43]);
        sorting_impl::min_max_swap(arr[32], arr[45]);
        sorting_impl::min_max_swap(arr[33], arr[46]);
        sorting_impl::min_max_swap(arr[34], arr[47]);
        sorting_impl::min_max_swap(arr[4], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[15]);
        sorting_impl::min_max_swap(arr[8], arr[26]);
        sorting_impl::min_max_swap(arr[10], arr[41]);
        sorting_impl::min_max_swap(arr[11], arr[42]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[29]);
        sorting_impl::min_max_swap(arr[19], arr[32]);
        sorting_impl::min_max_swap(arr[20], arr[33]);
        sorting_impl::min_max_swap(arr[21], arr[34]);
        sorting_impl::min_max_swap(arr[23], arr[36]);
        sorting_impl::min_max_swap(arr[25], arr[43]);
        sorting_impl::min_max_swap(arr[31], arr[48]);
        sorting_impl::min_max_swap(arr[37], arr[46]);
        sorting_impl::min_max_swap(arr[38], arr[47]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[7], arr[16]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[9], arr[31]);
        sorting_impl::min_max_swap(arr[10], arr[28]);
        sorting_impl::min_max_swap(arr[11], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[30]);
        sorting_impl::min_max_swap(arr[18], arr[40]);
        sorting_impl::min_max_swap(arr[21], arr[39]);
        sorting_impl::min_max_swap(arr[22], arr[44]);
        sorting_impl::min_max_swap(arr[23], arr[41]);
        sorting_impl::min_max_swap(arr[24], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[48]);
        sorting_impl::min_max_swap(arr[36], arr[45]);
        sorting_impl::min_max_swap(arr[38], arr[43]);
        sorting_impl::min_max_swap(arr[47], arr[52]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[27]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[20], arr[29]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[24], arr[33]);
        sorting_impl::min_max_swap(arr[25], arr[39]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[40]);
        sorting_impl::min_max_swap(arr[35], arr[44]);
        sorting_impl::min_max_swap(arr[36], arr[41]);
        sorting_impl::min_max_swap(arr[37], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[49]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[14]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[24], arr[29]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[39]);
        sorting_impl::min_max_swap(arr[35], arr[40]);
        sorting_impl::min_max_swap(arr[42], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[14]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[31]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[44]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[43], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[38], arr[41]);
        sorting_impl::min_max_swap(arr[39], arr[45]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[27]);
        sorting_impl::min_max_swap(arr[24], arr[31]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[29], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
    }
};

// Optimal network for N=54: 421 comparators, 20 layers
template <typename T> struct Sorter<T, 54> {
    static METAL_FUNC void sort(thread T (&arr)[54]) {
        sorting_impl::min_max_swap(arr[0], arr[13]);
        sorting_impl::min_max_swap(arr[1], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[16], arr[35]);
        sorting_impl::min_max_swap(arr[17], arr[34]);
        sorting_impl::min_max_swap(arr[18], arr[37]);
        sorting_impl::min_max_swap(arr[19], arr[36]);
        sorting_impl::min_max_swap(arr[20], arr[30]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[29]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[38], arr[51]);
        sorting_impl::min_max_swap(arr[39], arr[50]);
        sorting_impl::min_max_swap(arr[40], arr[53]);
        sorting_impl::min_max_swap(arr[41], arr[52]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[49]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[31]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[35]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[38], arr[43]);
        sorting_impl::min_max_swap(arr[39], arr[45]);
        sorting_impl::min_max_swap(arr[40], arr[47]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[44], arr[51]);
        sorting_impl::min_max_swap(arr[46], arr[52]);
        sorting_impl::min_max_swap(arr[48], arr[53]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[33]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[48]);
        sorting_impl::min_max_swap(arr[43], arr[49]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[0], arr[38]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[53]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[34]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[50]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[24], arr[38]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[53]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[51]);
        sorting_impl::min_max_swap(arr[49], arr[52]);
        sorting_impl::min_max_swap(arr[1], arr[39]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[52]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[47], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[40]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[51]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[52]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[27]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[40]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[51]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[2], arr[24]);
        sorting_impl::min_max_swap(arr[3], arr[41]);
        sorting_impl::min_max_swap(arr[4], arr[42]);
        sorting_impl::min_max_swap(arr[5], arr[43]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[48]);
        sorting_impl::min_max_swap(arr[11], arr[49]);
        sorting_impl::min_max_swap(arr[12], arr[50]);
        sorting_impl::min_max_swap(arr[13], arr[39]);
        sorting_impl::min_max_swap(arr[14], arr[40]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[34]);
        sorting_impl::min_max_swap(arr[29], arr[51]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[6], arr[44]);
        sorting_impl::min_max_swap(arr[7], arr[45]);
        sorting_impl::min_max_swap(arr[8], arr[46]);
        sorting_impl::min_max_swap(arr[9], arr[47]);
        sorting_impl::min_max_swap(arr[10], arr[32]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[43]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[49]);
        sorting_impl::min_max_swap(arr[34], arr[50]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[8], arr[30]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[33]);
        sorting_impl::min_max_swap(arr[14], arr[32]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[42]);
        sorting_impl::min_max_swap(arr[21], arr[39]);
        sorting_impl::min_max_swap(arr[23], arr[45]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[28], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[47]);
        sorting_impl::min_max_swap(arr[36], arr[44]);
        sorting_impl::min_max_swap(arr[38], arr[46]);
        sorting_impl::min_max_swap(arr[41], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[13]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[25]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[26]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[17], arr[31]);
        sorting_impl::min_max_swap(arr[22], arr[36]);
        sorting_impl::min_max_swap(arr[27], arr[39]);
        sorting_impl::min_max_swap(arr[28], arr[42]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[32], arr[48]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[34], arr[46]);
        sorting_impl::min_max_swap(arr[35], arr[47]);
        sorting_impl::min_max_swap(arr[37], arr[52]);
        sorting_impl::min_max_swap(arr[40], arr[50]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[24], arr[30]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[37], arr[49]);
        sorting_impl::min_max_swap(arr[40], arr[48]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[15], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[30]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[23], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[28], arr[38]);
        sorting_impl::min_max_swap(arr[29], arr[41]);
        sorting_impl::min_max_swap(arr[36], arr[44]);
        sorting_impl::min_max_swap(arr[37], arr[45]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[50]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[43]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[47]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
    }
};

// Optimal network for N=55: 432 comparators, 20 layers
template <typename T> struct Sorter<T, 55> {
    static METAL_FUNC void sort(thread T (&arr)[55]) {
        sorting_impl::min_max_swap(arr[1], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[13]);
        sorting_impl::min_max_swap(arr[3], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[37]);
        sorting_impl::min_max_swap(arr[17], arr[36]);
        sorting_impl::min_max_swap(arr[19], arr[38]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[40], arr[53]);
        sorting_impl::min_max_swap(arr[41], arr[52]);
        sorting_impl::min_max_swap(arr[43], arr[54]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[51]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[15], arr[33]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[34]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[37]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[39], arr[49]);
        sorting_impl::min_max_swap(arr[40], arr[45]);
        sorting_impl::min_max_swap(arr[41], arr[47]);
        sorting_impl::min_max_swap(arr[42], arr[50]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[46], arr[53]);
        sorting_impl::min_max_swap(arr[48], arr[54]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[35]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[32]);
        sorting_impl::min_max_swap(arr[23], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[51]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[54]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[35]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[51]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[0], arr[24]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[39]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[34]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[54]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[43], arr[50]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[0], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[24], arr[39]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[46]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[40]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[53]);
        sorting_impl::min_max_swap(arr[38], arr[54]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[1], arr[25]);
        sorting_impl::min_max_swap(arr[2], arr[26]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[36]);
        sorting_impl::min_max_swap(arr[14], arr[37]);
        sorting_impl::min_max_swap(arr[16], arr[40]);
        sorting_impl::min_max_swap(arr[17], arr[41]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[33]);
        sorting_impl::min_max_swap(arr[29], arr[52]);
        sorting_impl::min_max_swap(arr[30], arr[53]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[2], arr[17]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[16], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[26], arr[41]);
        sorting_impl::min_max_swap(arr[30], arr[37]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[52]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[2], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[27]);
        sorting_impl::min_max_swap(arr[4], arr[43]);
        sorting_impl::min_max_swap(arr[5], arr[44]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[49]);
        sorting_impl::min_max_swap(arr[11], arr[50]);
        sorting_impl::min_max_swap(arr[12], arr[35]);
        sorting_impl::min_max_swap(arr[13], arr[25]);
        sorting_impl::min_max_swap(arr[17], arr[26]);
        sorting_impl::min_max_swap(arr[18], arr[42]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[28], arr[51]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[30], arr[41]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[4], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[6], arr[21]);
        sorting_impl::min_max_swap(arr[7], arr[31]);
        sorting_impl::min_max_swap(arr[8], arr[23]);
        sorting_impl::min_max_swap(arr[9], arr[40]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[14], arr[45]);
        sorting_impl::min_max_swap(arr[22], arr[46]);
        sorting_impl::min_max_swap(arr[27], arr[42]);
        sorting_impl::min_max_swap(arr[32], arr[48]);
        sorting_impl::min_max_swap(arr[33], arr[49]);
        sorting_impl::min_max_swap(arr[34], arr[50]);
        sorting_impl::min_max_swap(arr[35], arr[51]);
        sorting_impl::min_max_swap(arr[39], arr[47]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[22]);
        sorting_impl::min_max_swap(arr[8], arr[39]);
        sorting_impl::min_max_swap(arr[9], arr[32]);
        sorting_impl::min_max_swap(arr[10], arr[33]);
        sorting_impl::min_max_swap(arr[11], arr[34]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[27]);
        sorting_impl::min_max_swap(arr[19], arr[43]);
        sorting_impl::min_max_swap(arr[20], arr[44]);
        sorting_impl::min_max_swap(arr[21], arr[45]);
        sorting_impl::min_max_swap(arr[23], arr[47]);
        sorting_impl::min_max_swap(arr[28], arr[35]);
        sorting_impl::min_max_swap(arr[31], arr[46]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[40], arr[48]);
        sorting_impl::min_max_swap(arr[41], arr[49]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[6], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[20], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[31]);
        sorting_impl::min_max_swap(arr[23], arr[39]);
        sorting_impl::min_max_swap(arr[28], arr[43]);
        sorting_impl::min_max_swap(arr[29], arr[44]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[47]);
        sorting_impl::min_max_swap(arr[36], arr[48]);
        sorting_impl::min_max_swap(arr[37], arr[45]);
        sorting_impl::min_max_swap(arr[42], arr[50]);
        sorting_impl::min_max_swap(arr[46], arr[52]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[40]);
        sorting_impl::min_max_swap(arr[27], arr[34]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[44]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[45], arr[51]);
        sorting_impl::min_max_swap(arr[50], arr[53]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[39]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[40]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[23]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[30], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[43]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[47]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[40], arr[43]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
    }
};

// Optimal network for N=56: 438 comparators, 20 layers
template <typename T> struct Sorter<T, 56> {
    static METAL_FUNC void sort(thread T (&arr)[56]) {
        sorting_impl::min_max_swap(arr[0], arr[13]);
        sorting_impl::min_max_swap(arr[1], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[16], arr[37]);
        sorting_impl::min_max_swap(arr[17], arr[36]);
        sorting_impl::min_max_swap(arr[18], arr[39]);
        sorting_impl::min_max_swap(arr[19], arr[38]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[40], arr[53]);
        sorting_impl::min_max_swap(arr[41], arr[52]);
        sorting_impl::min_max_swap(arr[42], arr[55]);
        sorting_impl::min_max_swap(arr[43], arr[54]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[51]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[0], arr[5]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[33]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[37]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[34], arr[39]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[40], arr[45]);
        sorting_impl::min_max_swap(arr[41], arr[47]);
        sorting_impl::min_max_swap(arr[42], arr[49]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[46], arr[53]);
        sorting_impl::min_max_swap(arr[48], arr[54]);
        sorting_impl::min_max_swap(arr[50], arr[55]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[32]);
        sorting_impl::min_max_swap(arr[23], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[34]);
        sorting_impl::min_max_swap(arr[21], arr[35]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[50]);
        sorting_impl::min_max_swap(arr[45], arr[51]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[0], arr[24]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[39]);
        sorting_impl::min_max_swap(arr[16], arr[40]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[36]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[55]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[52]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[32]);
        sorting_impl::min_max_swap(arr[23], arr[34]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[55]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[53]);
        sorting_impl::min_max_swap(arr[51], arr[54]);
        sorting_impl::min_max_swap(arr[1], arr[17]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[54]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[49], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[1], arr[25]);
        sorting_impl::min_max_swap(arr[2], arr[26]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[37]);
        sorting_impl::min_max_swap(arr[14], arr[38]);
        sorting_impl::min_max_swap(arr[17], arr[41]);
        sorting_impl::min_max_swap(arr[18], arr[42]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[32]);
        sorting_impl::min_max_swap(arr[23], arr[33]);
        sorting_impl::min_max_swap(arr[29], arr[53]);
        sorting_impl::min_max_swap(arr[30], arr[54]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[2], arr[18]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[26], arr[42]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[53]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[2], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[27]);
        sorting_impl::min_max_swap(arr[4], arr[44]);
        sorting_impl::min_max_swap(arr[5], arr[45]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[50]);
        sorting_impl::min_max_swap(arr[11], arr[51]);
        sorting_impl::min_max_swap(arr[12], arr[36]);
        sorting_impl::min_max_swap(arr[13], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[43]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[28], arr[52]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[42]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[39], arr[53]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[3], arr[19]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[21]);
        sorting_impl::min_max_swap(arr[6], arr[22]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[8], arr[32]);
        sorting_impl::min_max_swap(arr[9], arr[41]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[14], arr[46]);
        sorting_impl::min_max_swap(arr[23], arr[47]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[33], arr[49]);
        sorting_impl::min_max_swap(arr[34], arr[50]);
        sorting_impl::min_max_swap(arr[35], arr[51]);
        sorting_impl::min_max_swap(arr[36], arr[52]);
        sorting_impl::min_max_swap(arr[40], arr[48]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[23]);
        sorting_impl::min_max_swap(arr[8], arr[40]);
        sorting_impl::min_max_swap(arr[9], arr[33]);
        sorting_impl::min_max_swap(arr[10], arr[34]);
        sorting_impl::min_max_swap(arr[11], arr[35]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[15], arr[47]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[44]);
        sorting_impl::min_max_swap(arr[21], arr[45]);
        sorting_impl::min_max_swap(arr[22], arr[46]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[43]);
        sorting_impl::min_max_swap(arr[32], arr[48]);
        sorting_impl::min_max_swap(arr[41], arr[49]);
        sorting_impl::min_max_swap(arr[42], arr[50]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[40]);
        sorting_impl::min_max_swap(arr[36], arr[48]);
        sorting_impl::min_max_swap(arr[37], arr[49]);
        sorting_impl::min_max_swap(arr[38], arr[46]);
        sorting_impl::min_max_swap(arr[39], arr[47]);
        sorting_impl::min_max_swap(arr[43], arr[51]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[44]);
        sorting_impl::min_max_swap(arr[37], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[54]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[13], arr[21]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[40]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[46], arr[50]);
        sorting_impl::min_max_swap(arr[47], arr[51]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[24]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[41]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[44]);
        sorting_impl::min_max_swap(arr[39], arr[45]);
        sorting_impl::min_max_swap(arr[42], arr[48]);
        sorting_impl::min_max_swap(arr[43], arr[49]);
        sorting_impl::min_max_swap(arr[47], arr[51]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[50]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
    }
};

// Optimal network for N=57: 454 comparators, 21 layers
template <typename T> struct Sorter<T, 57> {
    static METAL_FUNC void sort(thread T (&arr)[57]) {
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[7]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[25], arr[38]);
        sorting_impl::min_max_swap(arr[26], arr[37]);
        sorting_impl::min_max_swap(arr[27], arr[40]);
        sorting_impl::min_max_swap(arr[28], arr[39]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[41], arr[54]);
        sorting_impl::min_max_swap(arr[42], arr[53]);
        sorting_impl::min_max_swap(arr[43], arr[56]);
        sorting_impl::min_max_swap(arr[44], arr[55]);
        sorting_impl::min_max_swap(arr[45], arr[49]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[52]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[18]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[23]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[34]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[35], arr[40]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[41], arr[46]);
        sorting_impl::min_max_swap(arr[42], arr[48]);
        sorting_impl::min_max_swap(arr[43], arr[50]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[47], arr[54]);
        sorting_impl::min_max_swap(arr[49], arr[55]);
        sorting_impl::min_max_swap(arr[51], arr[56]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[35]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[51]);
        sorting_impl::min_max_swap(arr[46], arr[52]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[37]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[56]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[53]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[42], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[47]);
        sorting_impl::min_max_swap(arr[46], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[51]);
        sorting_impl::min_max_swap(arr[50], arr[54]);
        sorting_impl::min_max_swap(arr[52], arr[55]);
        sorting_impl::min_max_swap(arr[1], arr[26]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[23]);
        sorting_impl::min_max_swap(arr[12], arr[41]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[34], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[55]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[50], arr[53]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[2], arr[27]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[10], arr[22]);
        sorting_impl::min_max_swap(arr[12], arr[25]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[23], arr[56]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[54]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[13], arr[42]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[55]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[0], arr[29]);
        sorting_impl::min_max_swap(arr[1], arr[13]);
        sorting_impl::min_max_swap(arr[3], arr[28]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[9], arr[21]);
        sorting_impl::min_max_swap(arr[14], arr[43]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[26], arr[42]);
        sorting_impl::min_max_swap(arr[30], arr[46]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[51]);
        sorting_impl::min_max_swap(arr[36], arr[52]);
        sorting_impl::min_max_swap(arr[37], arr[53]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[2], arr[14]);
        sorting_impl::min_max_swap(arr[4], arr[33]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[8], arr[37]);
        sorting_impl::min_max_swap(arr[10], arr[51]);
        sorting_impl::min_max_swap(arr[11], arr[52]);
        sorting_impl::min_max_swap(arr[13], arr[26]);
        sorting_impl::min_max_swap(arr[15], arr[44]);
        sorting_impl::min_max_swap(arr[16], arr[45]);
        sorting_impl::min_max_swap(arr[19], arr[40]);
        sorting_impl::min_max_swap(arr[20], arr[49]);
        sorting_impl::min_max_swap(arr[21], arr[54]);
        sorting_impl::min_max_swap(arr[24], arr[53]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[31], arr[47]);
        sorting_impl::min_max_swap(arr[32], arr[48]);
        sorting_impl::min_max_swap(arr[34], arr[50]);
        sorting_impl::min_max_swap(arr[0], arr[16]);
        sorting_impl::min_max_swap(arr[3], arr[15]);
        sorting_impl::min_max_swap(arr[4], arr[41]);
        sorting_impl::min_max_swap(arr[5], arr[30]);
        sorting_impl::min_max_swap(arr[6], arr[31]);
        sorting_impl::min_max_swap(arr[7], arr[32]);
        sorting_impl::min_max_swap(arr[9], arr[50]);
        sorting_impl::min_max_swap(arr[10], arr[35]);
        sorting_impl::min_max_swap(arr[11], arr[36]);
        sorting_impl::min_max_swap(arr[14], arr[27]);
        sorting_impl::min_max_swap(arr[17], arr[38]);
        sorting_impl::min_max_swap(arr[18], arr[39]);
        sorting_impl::min_max_swap(arr[20], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[40]);
        sorting_impl::min_max_swap(arr[24], arr[37]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[33], arr[49]);
        sorting_impl::min_max_swap(arr[0], arr[12]);
        sorting_impl::min_max_swap(arr[4], arr[20]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[29]);
        sorting_impl::min_max_swap(arr[9], arr[34]);
        sorting_impl::min_max_swap(arr[10], arr[27]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[38]);
        sorting_impl::min_max_swap(arr[22], arr[39]);
        sorting_impl::min_max_swap(arr[24], arr[45]);
        sorting_impl::min_max_swap(arr[30], arr[46]);
        sorting_impl::min_max_swap(arr[31], arr[47]);
        sorting_impl::min_max_swap(arr[32], arr[48]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[44]);
        sorting_impl::min_max_swap(arr[37], arr[49]);
        sorting_impl::min_max_swap(arr[40], arr[52]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[26]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[11], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[30]);
        sorting_impl::min_max_swap(arr[18], arr[31]);
        sorting_impl::min_max_swap(arr[19], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[46]);
        sorting_impl::min_max_swap(arr[22], arr[47]);
        sorting_impl::min_max_swap(arr[23], arr[48]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[37], arr[45]);
        sorting_impl::min_max_swap(arr[38], arr[50]);
        sorting_impl::min_max_swap(arr[39], arr[51]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[52], arr[55]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[18], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[25]);
        sorting_impl::min_max_swap(arr[21], arr[30]);
        sorting_impl::min_max_swap(arr[22], arr[31]);
        sorting_impl::min_max_swap(arr[23], arr[32]);
        sorting_impl::min_max_swap(arr[24], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[8], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[25]);
        sorting_impl::min_max_swap(arr[17], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[34]);
        sorting_impl::min_max_swap(arr[22], arr[35]);
        sorting_impl::min_max_swap(arr[23], arr[36]);
        sorting_impl::min_max_swap(arr[24], arr[33]);
        sorting_impl::min_max_swap(arr[29], arr[41]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[32], arr[40]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[43], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[51]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[46]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[44], arr[50]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
    }
};

// Optimal network for N=58: 465 comparators, 21 layers
template <typename T> struct Sorter<T, 58> {
    static METAL_FUNC void sort(thread T (&arr)[58]) {
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[7]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[10], arr[23]);
        sorting_impl::min_max_swap(arr[11], arr[22]);
        sorting_impl::min_max_swap(arr[12], arr[25]);
        sorting_impl::min_max_swap(arr[13], arr[24]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[26], arr[39]);
        sorting_impl::min_max_swap(arr[27], arr[38]);
        sorting_impl::min_max_swap(arr[28], arr[41]);
        sorting_impl::min_max_swap(arr[29], arr[40]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[42], arr[55]);
        sorting_impl::min_max_swap(arr[43], arr[54]);
        sorting_impl::min_max_swap(arr[44], arr[57]);
        sorting_impl::min_max_swap(arr[45], arr[56]);
        sorting_impl::min_max_swap(arr[46], arr[50]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[53]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[20], arr[25]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[26], arr[31]);
        sorting_impl::min_max_swap(arr[27], arr[33]);
        sorting_impl::min_max_swap(arr[28], arr[35]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[36], arr[41]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[42], arr[47]);
        sorting_impl::min_max_swap(arr[43], arr[49]);
        sorting_impl::min_max_swap(arr[44], arr[51]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[48], arr[55]);
        sorting_impl::min_max_swap(arr[50], arr[56]);
        sorting_impl::min_max_swap(arr[52], arr[57]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[37]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[52]);
        sorting_impl::min_max_swap(arr[47], arr[53]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[10], arr[42]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[22]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[38]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[54]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[55]);
        sorting_impl::min_max_swap(arr[53], arr[56]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[11], arr[43]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[51], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[2], arr[12]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[57]);
        sorting_impl::min_max_swap(arr[9], arr[23]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[55]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[2], arr[28]);
        sorting_impl::min_max_swap(arr[6], arr[56]);
        sorting_impl::min_max_swap(arr[7], arr[25]);
        sorting_impl::min_max_swap(arr[9], arr[39]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[55]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[57]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[0], arr[30]);
        sorting_impl::min_max_swap(arr[1], arr[31]);
        sorting_impl::min_max_swap(arr[3], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[24]);
        sorting_impl::min_max_swap(arr[8], arr[22]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[46]);
        sorting_impl::min_max_swap(arr[15], arr[47]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[23], arr[39]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[52]);
        sorting_impl::min_max_swap(arr[37], arr[53]);
        sorting_impl::min_max_swap(arr[38], arr[54]);
        sorting_impl::min_max_swap(arr[40], arr[56]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[0], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[15]);
        sorting_impl::min_max_swap(arr[3], arr[29]);
        sorting_impl::min_max_swap(arr[4], arr[34]);
        sorting_impl::min_max_swap(arr[5], arr[35]);
        sorting_impl::min_max_swap(arr[6], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[17]);
        sorting_impl::min_max_swap(arr[8], arr[38]);
        sorting_impl::min_max_swap(arr[12], arr[44]);
        sorting_impl::min_max_swap(arr[13], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[50]);
        sorting_impl::min_max_swap(arr[19], arr[51]);
        sorting_impl::min_max_swap(arr[20], arr[52]);
        sorting_impl::min_max_swap(arr[22], arr[54]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[30], arr[46]);
        sorting_impl::min_max_swap(arr[31], arr[47]);
        sorting_impl::min_max_swap(arr[32], arr[48]);
        sorting_impl::min_max_swap(arr[33], arr[49]);
        sorting_impl::min_max_swap(arr[0], arr[10]);
        sorting_impl::min_max_swap(arr[1], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[42]);
        sorting_impl::min_max_swap(arr[5], arr[43]);
        sorting_impl::min_max_swap(arr[6], arr[32]);
        sorting_impl::min_max_swap(arr[7], arr[33]);
        sorting_impl::min_max_swap(arr[8], arr[30]);
        sorting_impl::min_max_swap(arr[9], arr[31]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[45]);
        sorting_impl::min_max_swap(arr[16], arr[48]);
        sorting_impl::min_max_swap(arr[17], arr[49]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[36]);
        sorting_impl::min_max_swap(arr[21], arr[53]);
        sorting_impl::min_max_swap(arr[22], arr[38]);
        sorting_impl::min_max_swap(arr[23], arr[47]);
        sorting_impl::min_max_swap(arr[34], arr[50]);
        sorting_impl::min_max_swap(arr[35], arr[51]);
        sorting_impl::min_max_swap(arr[40], arr[52]);
        sorting_impl::min_max_swap(arr[4], arr[18]);
        sorting_impl::min_max_swap(arr[5], arr[19]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[46]);
        sorting_impl::min_max_swap(arr[24], arr[48]);
        sorting_impl::min_max_swap(arr[25], arr[49]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[44]);
        sorting_impl::min_max_swap(arr[38], arr[50]);
        sorting_impl::min_max_swap(arr[39], arr[51]);
        sorting_impl::min_max_swap(arr[41], arr[53]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[8], arr[14]);
        sorting_impl::min_max_swap(arr[9], arr[15]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[45]);
        sorting_impl::min_max_swap(arr[38], arr[46]);
        sorting_impl::min_max_swap(arr[39], arr[47]);
        sorting_impl::min_max_swap(arr[40], arr[48]);
        sorting_impl::min_max_swap(arr[41], arr[49]);
        sorting_impl::min_max_swap(arr[53], arr[56]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[13], arr[21]);
        sorting_impl::min_max_swap(arr[16], arr[28]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[24], arr[36]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[32], arr[44]);
        sorting_impl::min_max_swap(arr[33], arr[45]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[8], arr[18]);
        sorting_impl::min_max_swap(arr[9], arr[19]);
        sorting_impl::min_max_swap(arr[14], arr[26]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[34]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[42]);
        sorting_impl::min_max_swap(arr[31], arr[43]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[41], arr[45]);
        sorting_impl::min_max_swap(arr[49], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[54]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[50]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
    }
};

// Optimal network for N=59: 476 comparators, 21 layers
template <typename T> struct Sorter<T, 59> {
    static METAL_FUNC void sort(thread T (&arr)[59]) {
        sorting_impl::min_max_swap(arr[0], arr[9]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[24]);
        sorting_impl::min_max_swap(arr[12], arr[23]);
        sorting_impl::min_max_swap(arr[13], arr[26]);
        sorting_impl::min_max_swap(arr[14], arr[25]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[27], arr[40]);
        sorting_impl::min_max_swap(arr[28], arr[39]);
        sorting_impl::min_max_swap(arr[29], arr[42]);
        sorting_impl::min_max_swap(arr[30], arr[41]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[43], arr[56]);
        sorting_impl::min_max_swap(arr[44], arr[55]);
        sorting_impl::min_max_swap(arr[45], arr[58]);
        sorting_impl::min_max_swap(arr[46], arr[57]);
        sorting_impl::min_max_swap(arr[47], arr[51]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[54]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[12], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[27], arr[32]);
        sorting_impl::min_max_swap(arr[28], arr[34]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[33], arr[40]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[37], arr[42]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[43], arr[48]);
        sorting_impl::min_max_swap(arr[44], arr[50]);
        sorting_impl::min_max_swap(arr[45], arr[52]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[49], arr[56]);
        sorting_impl::min_max_swap(arr[51], arr[57]);
        sorting_impl::min_max_swap(arr[53], arr[58]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[2], arr[5]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[16], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[37]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[53]);
        sorting_impl::min_max_swap(arr[48], arr[54]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[56], arr[58]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[43]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[23]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[42]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[39]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[55]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[38], arr[41]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[45], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[51]);
        sorting_impl::min_max_swap(arr[50], arr[53]);
        sorting_impl::min_max_swap(arr[52], arr[56]);
        sorting_impl::min_max_swap(arr[54], arr[57]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[25]);
        sorting_impl::min_max_swap(arr[12], arr[44]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[57]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[46], arr[49]);
        sorting_impl::min_max_swap(arr[52], arr[55]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[9], arr[24]);
        sorting_impl::min_max_swap(arr[10], arr[41]);
        sorting_impl::min_max_swap(arr[12], arr[28]);
        sorting_impl::min_max_swap(arr[13], arr[45]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[57]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[56]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[7], arr[58]);
        sorting_impl::min_max_swap(arr[9], arr[40]);
        sorting_impl::min_max_swap(arr[13], arr[29]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[56]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[0], arr[31]);
        sorting_impl::min_max_swap(arr[1], arr[32]);
        sorting_impl::min_max_swap(arr[3], arr[14]);
        sorting_impl::min_max_swap(arr[6], arr[37]);
        sorting_impl::min_max_swap(arr[7], arr[26]);
        sorting_impl::min_max_swap(arr[8], arr[23]);
        sorting_impl::min_max_swap(arr[15], arr[47]);
        sorting_impl::min_max_swap(arr[16], arr[48]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[53]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[30], arr[46]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[38], arr[54]);
        sorting_impl::min_max_swap(arr[39], arr[55]);
        sorting_impl::min_max_swap(arr[42], arr[58]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[0], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[2], arr[33]);
        sorting_impl::min_max_swap(arr[3], arr[30]);
        sorting_impl::min_max_swap(arr[4], arr[35]);
        sorting_impl::min_max_swap(arr[5], arr[36]);
        sorting_impl::min_max_swap(arr[6], arr[45]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[8], arr[39]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[49]);
        sorting_impl::min_max_swap(arr[19], arr[51]);
        sorting_impl::min_max_swap(arr[20], arr[52]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[23], arr[55]);
        sorting_impl::min_max_swap(arr[26], arr[42]);
        sorting_impl::min_max_swap(arr[31], arr[47]);
        sorting_impl::min_max_swap(arr[32], arr[48]);
        sorting_impl::min_max_swap(arr[34], arr[50]);
        sorting_impl::min_max_swap(arr[37], arr[53]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[0], arr[11]);
        sorting_impl::min_max_swap(arr[1], arr[12]);
        sorting_impl::min_max_swap(arr[2], arr[17]);
        sorting_impl::min_max_swap(arr[4], arr[43]);
        sorting_impl::min_max_swap(arr[5], arr[44]);
        sorting_impl::min_max_swap(arr[6], arr[21]);
        sorting_impl::min_max_swap(arr[7], arr[34]);
        sorting_impl::min_max_swap(arr[8], arr[31]);
        sorting_impl::min_max_swap(arr[9], arr[32]);
        sorting_impl::min_max_swap(arr[14], arr[46]);
        sorting_impl::min_max_swap(arr[18], arr[50]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[22], arr[54]);
        sorting_impl::min_max_swap(arr[23], arr[39]);
        sorting_impl::min_max_swap(arr[24], arr[48]);
        sorting_impl::min_max_swap(arr[33], arr[49]);
        sorting_impl::min_max_swap(arr[35], arr[51]);
        sorting_impl::min_max_swap(arr[36], arr[52]);
        sorting_impl::min_max_swap(arr[37], arr[45]);
        sorting_impl::min_max_swap(arr[41], arr[53]);
        sorting_impl::min_max_swap(arr[2], arr[13]);
        sorting_impl::min_max_swap(arr[4], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[33]);
        sorting_impl::min_max_swap(arr[14], arr[30]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[18], arr[34]);
        sorting_impl::min_max_swap(arr[22], arr[38]);
        sorting_impl::min_max_swap(arr[23], arr[47]);
        sorting_impl::min_max_swap(arr[25], arr[49]);
        sorting_impl::min_max_swap(arr[26], arr[50]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[44]);
        sorting_impl::min_max_swap(arr[39], arr[51]);
        sorting_impl::min_max_swap(arr[40], arr[52]);
        sorting_impl::min_max_swap(arr[42], arr[54]);
        sorting_impl::min_max_swap(arr[4], arr[11]);
        sorting_impl::min_max_swap(arr[5], arr[12]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[7], arr[14]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[45]);
        sorting_impl::min_max_swap(arr[38], arr[46]);
        sorting_impl::min_max_swap(arr[39], arr[47]);
        sorting_impl::min_max_swap(arr[40], arr[48]);
        sorting_impl::min_max_swap(arr[41], arr[49]);
        sorting_impl::min_max_swap(arr[42], arr[50]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[34], arr[46]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[44]);
        sorting_impl::min_max_swap(arr[49], arr[55]);
        sorting_impl::min_max_swap(arr[50], arr[53]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[8], arr[19]);
        sorting_impl::min_max_swap(arr[9], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[21]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[16], arr[28]);
        sorting_impl::min_max_swap(arr[17], arr[29]);
        sorting_impl::min_max_swap(arr[18], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[24], arr[36]);
        sorting_impl::min_max_swap(arr[25], arr[37]);
        sorting_impl::min_max_swap(arr[26], arr[38]);
        sorting_impl::min_max_swap(arr[31], arr[43]);
        sorting_impl::min_max_swap(arr[32], arr[44]);
        sorting_impl::min_max_swap(arr[33], arr[45]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[8], arr[11]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[41], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[11]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[19]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[35]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[43]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[47]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[51]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
    }
};

// Optimal network for N=60: 483 comparators, 21 layers
template <typename T> struct Sorter<T, 60> {
    static METAL_FUNC void sort(thread T (&arr)[60]) {
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[4], arr[14]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[25]);
        sorting_impl::min_max_swap(arr[19], arr[29]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[28]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[40]);
        sorting_impl::min_max_swap(arr[34], arr[44]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[43]);
        sorting_impl::min_max_swap(arr[37], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[55]);
        sorting_impl::min_max_swap(arr[49], arr[59]);
        sorting_impl::min_max_swap(arr[50], arr[53]);
        sorting_impl::min_max_swap(arr[51], arr[58]);
        sorting_impl::min_max_swap(arr[52], arr[57]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[0], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[29]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[44]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[45], arr[59]);
        sorting_impl::min_max_swap(arr[46], arr[50]);
        sorting_impl::min_max_swap(arr[47], arr[53]);
        sorting_impl::min_max_swap(arr[48], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[56], arr[58]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[37]);
        sorting_impl::min_max_swap(arr[31], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[52]);
        sorting_impl::min_max_swap(arr[46], arr[51]);
        sorting_impl::min_max_swap(arr[47], arr[54]);
        sorting_impl::min_max_swap(arr[49], arr[55]);
        sorting_impl::min_max_swap(arr[50], arr[56]);
        sorting_impl::min_max_swap(arr[53], arr[58]);
        sorting_impl::min_max_swap(arr[57], arr[59]);
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[51]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[52], arr[56]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[54], arr[57]);
        sorting_impl::min_max_swap(arr[58], arr[59]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[59]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[44]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[34], arr[37]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[49], arr[52]);
        sorting_impl::min_max_swap(arr[50], arr[54]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[29]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[59]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[56], arr[58]);
        sorting_impl::min_max_swap(arr[0], arr[30]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[58]);
        sorting_impl::min_max_swap(arr[15], arr[45]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[43]);
        sorting_impl::min_max_swap(arr[29], arr[44]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[0], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[31]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[12], arr[57]);
        sorting_impl::min_max_swap(arr[13], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[46]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[27], arr[42]);
        sorting_impl::min_max_swap(arr[30], arr[45]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[43], arr[58]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[27]);
        sorting_impl::min_max_swap(arr[15], arr[30]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[43]);
        sorting_impl::min_max_swap(arr[31], arr[46]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[57]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[2], arr[32]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[4], arr[49]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[39]);
        sorting_impl::min_max_swap(arr[10], arr[40]);
        sorting_impl::min_max_swap(arr[11], arr[26]);
        sorting_impl::min_max_swap(arr[16], arr[31]);
        sorting_impl::min_max_swap(arr[17], arr[47]);
        sorting_impl::min_max_swap(arr[19], arr[34]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[54]);
        sorting_impl::min_max_swap(arr[25], arr[55]);
        sorting_impl::min_max_swap(arr[27], arr[42]);
        sorting_impl::min_max_swap(arr[33], arr[48]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[56]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[2], arr[17]);
        sorting_impl::min_max_swap(arr[3], arr[33]);
        sorting_impl::min_max_swap(arr[4], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[50]);
        sorting_impl::min_max_swap(arr[6], arr[51]);
        sorting_impl::min_max_swap(arr[7], arr[37]);
        sorting_impl::min_max_swap(arr[8], arr[38]);
        sorting_impl::min_max_swap(arr[9], arr[24]);
        sorting_impl::min_max_swap(arr[10], arr[25]);
        sorting_impl::min_max_swap(arr[11], arr[41]);
        sorting_impl::min_max_swap(arr[18], arr[48]);
        sorting_impl::min_max_swap(arr[20], arr[35]);
        sorting_impl::min_max_swap(arr[21], arr[36]);
        sorting_impl::min_max_swap(arr[22], arr[52]);
        sorting_impl::min_max_swap(arr[23], arr[53]);
        sorting_impl::min_max_swap(arr[26], arr[56]);
        sorting_impl::min_max_swap(arr[32], arr[47]);
        sorting_impl::min_max_swap(arr[34], arr[49]);
        sorting_impl::min_max_swap(arr[39], arr[54]);
        sorting_impl::min_max_swap(arr[40], arr[55]);
        sorting_impl::min_max_swap(arr[4], arr[15]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[6], arr[21]);
        sorting_impl::min_max_swap(arr[7], arr[22]);
        sorting_impl::min_max_swap(arr[8], arr[23]);
        sorting_impl::min_max_swap(arr[9], arr[31]);
        sorting_impl::min_max_swap(arr[11], arr[48]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[32]);
        sorting_impl::min_max_swap(arr[18], arr[33]);
        sorting_impl::min_max_swap(arr[24], arr[39]);
        sorting_impl::min_max_swap(arr[25], arr[40]);
        sorting_impl::min_max_swap(arr[26], arr[41]);
        sorting_impl::min_max_swap(arr[27], arr[49]);
        sorting_impl::min_max_swap(arr[35], arr[50]);
        sorting_impl::min_max_swap(arr[36], arr[51]);
        sorting_impl::min_max_swap(arr[37], arr[52]);
        sorting_impl::min_max_swap(arr[38], arr[53]);
        sorting_impl::min_max_swap(arr[43], arr[54]);
        sorting_impl::min_max_swap(arr[44], arr[55]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[16]);
        sorting_impl::min_max_swap(arr[6], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[8], arr[30]);
        sorting_impl::min_max_swap(arr[10], arr[32]);
        sorting_impl::min_max_swap(arr[11], arr[33]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[34]);
        sorting_impl::min_max_swap(arr[22], arr[37]);
        sorting_impl::min_max_swap(arr[23], arr[38]);
        sorting_impl::min_max_swap(arr[24], arr[46]);
        sorting_impl::min_max_swap(arr[25], arr[47]);
        sorting_impl::min_max_swap(arr[26], arr[48]);
        sorting_impl::min_max_swap(arr[28], arr[50]);
        sorting_impl::min_max_swap(arr[29], arr[51]);
        sorting_impl::min_max_swap(arr[41], arr[52]);
        sorting_impl::min_max_swap(arr[42], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[55], arr[58]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[24]);
        sorting_impl::min_max_swap(arr[14], arr[25]);
        sorting_impl::min_max_swap(arr[19], arr[30]);
        sorting_impl::min_max_swap(arr[20], arr[35]);
        sorting_impl::min_max_swap(arr[21], arr[36]);
        sorting_impl::min_max_swap(arr[22], arr[33]);
        sorting_impl::min_max_swap(arr[23], arr[45]);
        sorting_impl::min_max_swap(arr[26], arr[37]);
        sorting_impl::min_max_swap(arr[28], arr[46]);
        sorting_impl::min_max_swap(arr[29], arr[47]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[48]);
        sorting_impl::min_max_swap(arr[42], arr[49]);
        sorting_impl::min_max_swap(arr[43], arr[50]);
        sorting_impl::min_max_swap(arr[44], arr[51]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[12], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[31]);
        sorting_impl::min_max_swap(arr[21], arr[32]);
        sorting_impl::min_max_swap(arr[26], arr[33]);
        sorting_impl::min_max_swap(arr[27], arr[45]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[50], arr[54]);
        sorting_impl::min_max_swap(arr[51], arr[57]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[24], arr[31]);
        sorting_impl::min_max_swap(arr[25], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[34]);
        sorting_impl::min_max_swap(arr[28], arr[35]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[38], arr[45]);
        sorting_impl::min_max_swap(arr[39], arr[46]);
        sorting_impl::min_max_swap(arr[40], arr[47]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[42], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[48]);
        sorting_impl::min_max_swap(arr[44], arr[49]);
        sorting_impl::min_max_swap(arr[46], arr[52]);
        sorting_impl::min_max_swap(arr[47], arr[53]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[56]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
    }
};

// Optimal network for N=61: 497 comparators, 22 layers
template <typename T> struct Sorter<T, 61> {
    static METAL_FUNC void sort(thread T (&arr)[61]) {
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[4], arr[14]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[25]);
        sorting_impl::min_max_swap(arr[19], arr[29]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[28]);
        sorting_impl::min_max_swap(arr[22], arr[27]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[40]);
        sorting_impl::min_max_swap(arr[34], arr[44]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[43]);
        sorting_impl::min_max_swap(arr[37], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[45], arr[58]);
        sorting_impl::min_max_swap(arr[46], arr[57]);
        sorting_impl::min_max_swap(arr[47], arr[60]);
        sorting_impl::min_max_swap(arr[48], arr[59]);
        sorting_impl::min_max_swap(arr[49], arr[53]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[56]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[0], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[29]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[44]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[45], arr[50]);
        sorting_impl::min_max_swap(arr[46], arr[52]);
        sorting_impl::min_max_swap(arr[47], arr[54]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[51], arr[58]);
        sorting_impl::min_max_swap(arr[53], arr[59]);
        sorting_impl::min_max_swap(arr[55], arr[60]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[22]);
        sorting_impl::min_max_swap(arr[16], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[37]);
        sorting_impl::min_max_swap(arr[31], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[59], arr[60]);
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[55]);
        sorting_impl::min_max_swap(arr[50], arr[56]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[57], arr[59]);
        sorting_impl::min_max_swap(arr[58], arr[60]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[22]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[44]);
        sorting_impl::min_max_swap(arr[30], arr[33]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[34], arr[37]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[57]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[58], arr[59]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[46], arr[49]);
        sorting_impl::min_max_swap(arr[47], arr[51]);
        sorting_impl::min_max_swap(arr[50], arr[53]);
        sorting_impl::min_max_swap(arr[52], arr[55]);
        sorting_impl::min_max_swap(arr[54], arr[58]);
        sorting_impl::min_max_swap(arr[56], arr[59]);
        sorting_impl::min_max_swap(arr[0], arr[30]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[14], arr[59]);
        sorting_impl::min_max_swap(arr[15], arr[45]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[43]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[51]);
        sorting_impl::min_max_swap(arr[54], arr[57]);
        sorting_impl::min_max_swap(arr[56], arr[58]);
        sorting_impl::min_max_swap(arr[0], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[31]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[13], arr[58]);
        sorting_impl::min_max_swap(arr[14], arr[29]);
        sorting_impl::min_max_swap(arr[16], arr[46]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[27], arr[42]);
        sorting_impl::min_max_swap(arr[30], arr[45]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[44], arr[59]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[28]);
        sorting_impl::min_max_swap(arr[15], arr[30]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[29], arr[44]);
        sorting_impl::min_max_swap(arr[31], arr[46]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[43], arr[58]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[2], arr[32]);
        sorting_impl::min_max_swap(arr[3], arr[33]);
        sorting_impl::min_max_swap(arr[4], arr[49]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[39]);
        sorting_impl::min_max_swap(arr[10], arr[40]);
        sorting_impl::min_max_swap(arr[11], arr[41]);
        sorting_impl::min_max_swap(arr[12], arr[57]);
        sorting_impl::min_max_swap(arr[16], arr[31]);
        sorting_impl::min_max_swap(arr[17], arr[47]);
        sorting_impl::min_max_swap(arr[18], arr[48]);
        sorting_impl::min_max_swap(arr[19], arr[34]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[25], arr[55]);
        sorting_impl::min_max_swap(arr[26], arr[60]);
        sorting_impl::min_max_swap(arr[28], arr[43]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[2], arr[17]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[4], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[50]);
        sorting_impl::min_max_swap(arr[6], arr[51]);
        sorting_impl::min_max_swap(arr[7], arr[37]);
        sorting_impl::min_max_swap(arr[8], arr[38]);
        sorting_impl::min_max_swap(arr[10], arr[25]);
        sorting_impl::min_max_swap(arr[11], arr[26]);
        sorting_impl::min_max_swap(arr[12], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[35]);
        sorting_impl::min_max_swap(arr[21], arr[36]);
        sorting_impl::min_max_swap(arr[23], arr[53]);
        sorting_impl::min_max_swap(arr[24], arr[54]);
        sorting_impl::min_max_swap(arr[32], arr[47]);
        sorting_impl::min_max_swap(arr[33], arr[48]);
        sorting_impl::min_max_swap(arr[34], arr[49]);
        sorting_impl::min_max_swap(arr[40], arr[55]);
        sorting_impl::min_max_swap(arr[41], arr[60]);
        sorting_impl::min_max_swap(arr[42], arr[57]);
        sorting_impl::min_max_swap(arr[4], arr[15]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[6], arr[21]);
        sorting_impl::min_max_swap(arr[7], arr[52]);
        sorting_impl::min_max_swap(arr[8], arr[23]);
        sorting_impl::min_max_swap(arr[9], arr[24]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[32]);
        sorting_impl::min_max_swap(arr[18], arr[33]);
        sorting_impl::min_max_swap(arr[22], arr[37]);
        sorting_impl::min_max_swap(arr[25], arr[40]);
        sorting_impl::min_max_swap(arr[26], arr[41]);
        sorting_impl::min_max_swap(arr[27], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[50]);
        sorting_impl::min_max_swap(arr[36], arr[51]);
        sorting_impl::min_max_swap(arr[38], arr[53]);
        sorting_impl::min_max_swap(arr[39], arr[54]);
        sorting_impl::min_max_swap(arr[44], arr[55]);
        sorting_impl::min_max_swap(arr[58], arr[60]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[16]);
        sorting_impl::min_max_swap(arr[6], arr[17]);
        sorting_impl::min_max_swap(arr[8], arr[30]);
        sorting_impl::min_max_swap(arr[9], arr[31]);
        sorting_impl::min_max_swap(arr[10], arr[32]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[34]);
        sorting_impl::min_max_swap(arr[23], arr[38]);
        sorting_impl::min_max_swap(arr[24], arr[39]);
        sorting_impl::min_max_swap(arr[25], arr[47]);
        sorting_impl::min_max_swap(arr[27], arr[49]);
        sorting_impl::min_max_swap(arr[28], arr[50]);
        sorting_impl::min_max_swap(arr[29], arr[51]);
        sorting_impl::min_max_swap(arr[37], arr[56]);
        sorting_impl::min_max_swap(arr[42], arr[53]);
        sorting_impl::min_max_swap(arr[43], arr[54]);
        sorting_impl::min_max_swap(arr[48], arr[52]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[11], arr[37]);
        sorting_impl::min_max_swap(arr[14], arr[25]);
        sorting_impl::min_max_swap(arr[19], arr[30]);
        sorting_impl::min_max_swap(arr[20], arr[35]);
        sorting_impl::min_max_swap(arr[21], arr[36]);
        sorting_impl::min_max_swap(arr[22], arr[48]);
        sorting_impl::min_max_swap(arr[23], arr[45]);
        sorting_impl::min_max_swap(arr[24], arr[46]);
        sorting_impl::min_max_swap(arr[26], arr[52]);
        sorting_impl::min_max_swap(arr[29], arr[47]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[41], arr[56]);
        sorting_impl::min_max_swap(arr[42], arr[49]);
        sorting_impl::min_max_swap(arr[43], arr[50]);
        sorting_impl::min_max_swap(arr[44], arr[51]);
        sorting_impl::min_max_swap(arr[54], arr[58]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[22]);
        sorting_impl::min_max_swap(arr[11], arr[33]);
        sorting_impl::min_max_swap(arr[12], arr[23]);
        sorting_impl::min_max_swap(arr[13], arr[24]);
        sorting_impl::min_max_swap(arr[20], arr[31]);
        sorting_impl::min_max_swap(arr[21], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[45]);
        sorting_impl::min_max_swap(arr[28], arr[46]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[48]);
        sorting_impl::min_max_swap(arr[41], arr[52]);
        sorting_impl::min_max_swap(arr[50], arr[56]);
        sorting_impl::min_max_swap(arr[51], arr[57]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[24], arr[31]);
        sorting_impl::min_max_swap(arr[25], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[34]);
        sorting_impl::min_max_swap(arr[28], arr[35]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[45]);
        sorting_impl::min_max_swap(arr[39], arr[46]);
        sorting_impl::min_max_swap(arr[40], arr[47]);
        sorting_impl::min_max_swap(arr[41], arr[48]);
        sorting_impl::min_max_swap(arr[51], arr[54]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[37]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[42], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[51], arr[56]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[33]);
        sorting_impl::min_max_swap(arr[29], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[42]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[48]);
        sorting_impl::min_max_swap(arr[44], arr[49]);
        sorting_impl::min_max_swap(arr[46], arr[52]);
        sorting_impl::min_max_swap(arr[47], arr[53]);
        sorting_impl::min_max_swap(arr[57], arr[60]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[59], arr[60]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[56]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
    }
};

// Optimal network for N=62: 506 comparators, 21 layers
template <typename T> struct Sorter<T, 62> {
    static METAL_FUNC void sort(thread T (&arr)[62]) {
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[4], arr[14]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[27]);
        sorting_impl::min_max_swap(arr[17], arr[30]);
        sorting_impl::min_max_swap(arr[18], arr[29]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[41]);
        sorting_impl::min_max_swap(arr[35], arr[45]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[44]);
        sorting_impl::min_max_swap(arr[38], arr[43]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[46], arr[59]);
        sorting_impl::min_max_swap(arr[47], arr[58]);
        sorting_impl::min_max_swap(arr[48], arr[61]);
        sorting_impl::min_max_swap(arr[49], arr[60]);
        sorting_impl::min_max_swap(arr[50], arr[54]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[57]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[0], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[16], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[31], arr[45]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[46], arr[51]);
        sorting_impl::min_max_swap(arr[47], arr[53]);
        sorting_impl::min_max_swap(arr[48], arr[55]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[52], arr[59]);
        sorting_impl::min_max_swap(arr[54], arr[60]);
        sorting_impl::min_max_swap(arr[56], arr[61]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[38]);
        sorting_impl::min_max_swap(arr[32], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[40]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[36], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[58], arr[59]);
        sorting_impl::min_max_swap(arr[60], arr[61]);
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[56]);
        sorting_impl::min_max_swap(arr[51], arr[57]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[58], arr[60]);
        sorting_impl::min_max_swap(arr[59], arr[61]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[46]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[27]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[58]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[59], arr[60]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[47], arr[50]);
        sorting_impl::min_max_swap(arr[48], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[56]);
        sorting_impl::min_max_swap(arr[55], arr[59]);
        sorting_impl::min_max_swap(arr[57], arr[60]);
        sorting_impl::min_max_swap(arr[0], arr[31]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[14], arr[60]);
        sorting_impl::min_max_swap(arr[16], arr[47]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[52]);
        sorting_impl::min_max_swap(arr[55], arr[58]);
        sorting_impl::min_max_swap(arr[57], arr[59]);
        sorting_impl::min_max_swap(arr[0], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[32]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[13], arr[59]);
        sorting_impl::min_max_swap(arr[14], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[48]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[31], arr[46]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[45], arr[60]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[56], arr[58]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[28]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[32], arr[47]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[44], arr[59]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[2], arr[33]);
        sorting_impl::min_max_swap(arr[3], arr[34]);
        sorting_impl::min_max_swap(arr[4], arr[50]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[40]);
        sorting_impl::min_max_swap(arr[10], arr[41]);
        sorting_impl::min_max_swap(arr[11], arr[61]);
        sorting_impl::min_max_swap(arr[12], arr[58]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[18], arr[49]);
        sorting_impl::min_max_swap(arr[19], arr[35]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[56]);
        sorting_impl::min_max_swap(arr[26], arr[57]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[30], arr[42]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[2], arr[17]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[4], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[51]);
        sorting_impl::min_max_swap(arr[6], arr[52]);
        sorting_impl::min_max_swap(arr[7], arr[38]);
        sorting_impl::min_max_swap(arr[8], arr[39]);
        sorting_impl::min_max_swap(arr[10], arr[25]);
        sorting_impl::min_max_swap(arr[11], arr[30]);
        sorting_impl::min_max_swap(arr[12], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[36]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[53]);
        sorting_impl::min_max_swap(arr[23], arr[54]);
        sorting_impl::min_max_swap(arr[24], arr[55]);
        sorting_impl::min_max_swap(arr[33], arr[48]);
        sorting_impl::min_max_swap(arr[35], arr[50]);
        sorting_impl::min_max_swap(arr[41], arr[56]);
        sorting_impl::min_max_swap(arr[42], arr[61]);
        sorting_impl::min_max_swap(arr[43], arr[58]);
        sorting_impl::min_max_swap(arr[4], arr[15]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[6], arr[21]);
        sorting_impl::min_max_swap(arr[7], arr[49]);
        sorting_impl::min_max_swap(arr[8], arr[23]);
        sorting_impl::min_max_swap(arr[9], arr[24]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[22], arr[34]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[30], arr[42]);
        sorting_impl::min_max_swap(arr[36], arr[51]);
        sorting_impl::min_max_swap(arr[37], arr[52]);
        sorting_impl::min_max_swap(arr[38], arr[57]);
        sorting_impl::min_max_swap(arr[39], arr[54]);
        sorting_impl::min_max_swap(arr[40], arr[55]);
        sorting_impl::min_max_swap(arr[45], arr[56]);
        sorting_impl::min_max_swap(arr[59], arr[61]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[16]);
        sorting_impl::min_max_swap(arr[6], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[8], arr[31]);
        sorting_impl::min_max_swap(arr[9], arr[32]);
        sorting_impl::min_max_swap(arr[10], arr[33]);
        sorting_impl::min_max_swap(arr[11], arr[22]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[35]);
        sorting_impl::min_max_swap(arr[23], arr[39]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[25], arr[48]);
        sorting_impl::min_max_swap(arr[26], arr[38]);
        sorting_impl::min_max_swap(arr[27], arr[50]);
        sorting_impl::min_max_swap(arr[28], arr[51]);
        sorting_impl::min_max_swap(arr[29], arr[52]);
        sorting_impl::min_max_swap(arr[34], arr[53]);
        sorting_impl::min_max_swap(arr[42], arr[57]);
        sorting_impl::min_max_swap(arr[43], arr[54]);
        sorting_impl::min_max_swap(arr[44], arr[55]);
        sorting_impl::min_max_swap(arr[60], arr[61]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[19], arr[31]);
        sorting_impl::min_max_swap(arr[20], arr[36]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[34]);
        sorting_impl::min_max_swap(arr[23], arr[46]);
        sorting_impl::min_max_swap(arr[24], arr[47]);
        sorting_impl::min_max_swap(arr[29], arr[48]);
        sorting_impl::min_max_swap(arr[30], arr[53]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[38], arr[49]);
        sorting_impl::min_max_swap(arr[43], arr[50]);
        sorting_impl::min_max_swap(arr[44], arr[51]);
        sorting_impl::min_max_swap(arr[45], arr[52]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[12], arr[23]);
        sorting_impl::min_max_swap(arr[13], arr[24]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[38]);
        sorting_impl::min_max_swap(arr[27], arr[46]);
        sorting_impl::min_max_swap(arr[28], arr[47]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[53]);
        sorting_impl::min_max_swap(arr[52], arr[58]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[57], arr[60]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[34], arr[49]);
        sorting_impl::min_max_swap(arr[39], arr[46]);
        sorting_impl::min_max_swap(arr[40], arr[47]);
        sorting_impl::min_max_swap(arr[41], arr[48]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[58], arr[59]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[49]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[56], arr[58]);
        sorting_impl::min_max_swap(arr[57], arr[59]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[35]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[43]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[46]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[50]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[54]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
    }
};

// Optimal network for N=63: 515 comparators, 21 layers
template <typename T> struct Sorter<T, 63> {
    static METAL_FUNC void sort(thread T (&arr)[63]) {
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[10]);
        sorting_impl::min_max_swap(arr[4], arr[14]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[13]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[15], arr[28]);
        sorting_impl::min_max_swap(arr[16], arr[27]);
        sorting_impl::min_max_swap(arr[17], arr[30]);
        sorting_impl::min_max_swap(arr[18], arr[29]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[31], arr[44]);
        sorting_impl::min_max_swap(arr[32], arr[43]);
        sorting_impl::min_max_swap(arr[33], arr[46]);
        sorting_impl::min_max_swap(arr[34], arr[45]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[47], arr[60]);
        sorting_impl::min_max_swap(arr[48], arr[59]);
        sorting_impl::min_max_swap(arr[49], arr[62]);
        sorting_impl::min_max_swap(arr[50], arr[61]);
        sorting_impl::min_max_swap(arr[51], arr[55]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[58]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[0], arr[14]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[6], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[20]);
        sorting_impl::min_max_swap(arr[16], arr[22]);
        sorting_impl::min_max_swap(arr[17], arr[24]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[21], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[25], arr[30]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[31], arr[36]);
        sorting_impl::min_max_swap(arr[32], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[40]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[37], arr[44]);
        sorting_impl::min_max_swap(arr[39], arr[45]);
        sorting_impl::min_max_swap(arr[41], arr[46]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[47], arr[52]);
        sorting_impl::min_max_swap(arr[48], arr[54]);
        sorting_impl::min_max_swap(arr[49], arr[56]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[53], arr[60]);
        sorting_impl::min_max_swap(arr[55], arr[61]);
        sorting_impl::min_max_swap(arr[57], arr[62]);
        sorting_impl::min_max_swap(arr[58], arr[59]);
        sorting_impl::min_max_swap(arr[0], arr[7]);
        sorting_impl::min_max_swap(arr[1], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[9]);
        sorting_impl::min_max_swap(arr[4], arr[10]);
        sorting_impl::min_max_swap(arr[5], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[13]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[59], arr[60]);
        sorting_impl::min_max_swap(arr[61], arr[62]);
        sorting_impl::min_max_swap(arr[0], arr[6]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[20], arr[26]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[36], arr[42]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[57]);
        sorting_impl::min_max_swap(arr[52], arr[58]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[59], arr[61]);
        sorting_impl::min_max_swap(arr[60], arr[62]);
        sorting_impl::min_max_swap(arr[0], arr[3]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[4], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[15], arr[47]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[27]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[43]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[62]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[59]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[56], arr[58]);
        sorting_impl::min_max_swap(arr[60], arr[61]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[25]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[26], arr[29]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[36], arr[39]);
        sorting_impl::min_max_swap(arr[38], arr[41]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[42], arr[45]);
        sorting_impl::min_max_swap(arr[48], arr[51]);
        sorting_impl::min_max_swap(arr[49], arr[53]);
        sorting_impl::min_max_swap(arr[52], arr[55]);
        sorting_impl::min_max_swap(arr[54], arr[57]);
        sorting_impl::min_max_swap(arr[56], arr[60]);
        sorting_impl::min_max_swap(arr[58], arr[61]);
        sorting_impl::min_max_swap(arr[0], arr[31]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[14], arr[61]);
        sorting_impl::min_max_swap(arr[16], arr[48]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[18], arr[21]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[34], arr[37]);
        sorting_impl::min_max_swap(arr[40], arr[43]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[50], arr[53]);
        sorting_impl::min_max_swap(arr[56], arr[59]);
        sorting_impl::min_max_swap(arr[58], arr[60]);
        sorting_impl::min_max_swap(arr[0], arr[15]);
        sorting_impl::min_max_swap(arr[1], arr[32]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[13], arr[60]);
        sorting_impl::min_max_swap(arr[14], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[49]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[31], arr[47]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[45], arr[61]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[57], arr[59]);
        sorting_impl::min_max_swap(arr[1], arr[16]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[13], arr[28]);
        sorting_impl::min_max_swap(arr[15], arr[31]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[32], arr[48]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[60]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[58], arr[59]);
        sorting_impl::min_max_swap(arr[2], arr[33]);
        sorting_impl::min_max_swap(arr[4], arr[51]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[10], arr[41]);
        sorting_impl::min_max_swap(arr[11], arr[30]);
        sorting_impl::min_max_swap(arr[12], arr[59]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[18], arr[50]);
        sorting_impl::min_max_swap(arr[19], arr[35]);
        sorting_impl::min_max_swap(arr[20], arr[36]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[57]);
        sorting_impl::min_max_swap(arr[26], arr[58]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[2], arr[17]);
        sorting_impl::min_max_swap(arr[3], arr[38]);
        sorting_impl::min_max_swap(arr[4], arr[19]);
        sorting_impl::min_max_swap(arr[5], arr[52]);
        sorting_impl::min_max_swap(arr[6], arr[53]);
        sorting_impl::min_max_swap(arr[7], arr[42]);
        sorting_impl::min_max_swap(arr[8], arr[39]);
        sorting_impl::min_max_swap(arr[9], arr[40]);
        sorting_impl::min_max_swap(arr[10], arr[25]);
        sorting_impl::min_max_swap(arr[11], arr[46]);
        sorting_impl::min_max_swap(arr[12], arr[27]);
        sorting_impl::min_max_swap(arr[18], arr[34]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[54]);
        sorting_impl::min_max_swap(arr[23], arr[55]);
        sorting_impl::min_max_swap(arr[24], arr[56]);
        sorting_impl::min_max_swap(arr[30], arr[62]);
        sorting_impl::min_max_swap(arr[33], arr[49]);
        sorting_impl::min_max_swap(arr[35], arr[51]);
        sorting_impl::min_max_swap(arr[41], arr[57]);
        sorting_impl::min_max_swap(arr[43], arr[59]);
        sorting_impl::min_max_swap(arr[3], arr[22]);
        sorting_impl::min_max_swap(arr[4], arr[15]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[6], arr[21]);
        sorting_impl::min_max_swap(arr[7], arr[50]);
        sorting_impl::min_max_swap(arr[8], arr[23]);
        sorting_impl::min_max_swap(arr[9], arr[24]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[25], arr[41]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[43]);
        sorting_impl::min_max_swap(arr[30], arr[46]);
        sorting_impl::min_max_swap(arr[36], arr[52]);
        sorting_impl::min_max_swap(arr[37], arr[53]);
        sorting_impl::min_max_swap(arr[38], arr[54]);
        sorting_impl::min_max_swap(arr[39], arr[55]);
        sorting_impl::min_max_swap(arr[40], arr[56]);
        sorting_impl::min_max_swap(arr[42], arr[58]);
        sorting_impl::min_max_swap(arr[45], arr[57]);
        sorting_impl::min_max_swap(arr[61], arr[62]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[5], arr[16]);
        sorting_impl::min_max_swap(arr[6], arr[17]);
        sorting_impl::min_max_swap(arr[7], arr[26]);
        sorting_impl::min_max_swap(arr[8], arr[31]);
        sorting_impl::min_max_swap(arr[9], arr[32]);
        sorting_impl::min_max_swap(arr[10], arr[33]);
        sorting_impl::min_max_swap(arr[11], arr[38]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[19], arr[35]);
        sorting_impl::min_max_swap(arr[23], arr[39]);
        sorting_impl::min_max_swap(arr[24], arr[40]);
        sorting_impl::min_max_swap(arr[25], arr[49]);
        sorting_impl::min_max_swap(arr[27], arr[51]);
        sorting_impl::min_max_swap(arr[28], arr[52]);
        sorting_impl::min_max_swap(arr[29], arr[53]);
        sorting_impl::min_max_swap(arr[30], arr[54]);
        sorting_impl::min_max_swap(arr[42], arr[50]);
        sorting_impl::min_max_swap(arr[43], arr[55]);
        sorting_impl::min_max_swap(arr[44], arr[56]);
        sorting_impl::min_max_swap(arr[46], arr[58]);
        sorting_impl::min_max_swap(arr[7], arr[18]);
        sorting_impl::min_max_swap(arr[8], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[25]);
        sorting_impl::min_max_swap(arr[19], arr[31]);
        sorting_impl::min_max_swap(arr[20], arr[36]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[38]);
        sorting_impl::min_max_swap(arr[23], arr[47]);
        sorting_impl::min_max_swap(arr[24], arr[48]);
        sorting_impl::min_max_swap(arr[29], arr[49]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[43], arr[51]);
        sorting_impl::min_max_swap(arr[44], arr[52]);
        sorting_impl::min_max_swap(arr[45], arr[53]);
        sorting_impl::min_max_swap(arr[46], arr[54]);
        sorting_impl::min_max_swap(arr[58], arr[60]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[11], arr[22]);
        sorting_impl::min_max_swap(arr[12], arr[23]);
        sorting_impl::min_max_swap(arr[13], arr[24]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[47]);
        sorting_impl::min_max_swap(arr[28], arr[48]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[50]);
        sorting_impl::min_max_swap(arr[53], arr[59]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[60], arr[61]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[26]);
        sorting_impl::min_max_swap(arr[12], arr[19]);
        sorting_impl::min_max_swap(arr[13], arr[20]);
        sorting_impl::min_max_swap(arr[14], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[34]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[42]);
        sorting_impl::min_max_swap(arr[38], arr[50]);
        sorting_impl::min_max_swap(arr[39], arr[47]);
        sorting_impl::min_max_swap(arr[40], arr[48]);
        sorting_impl::min_max_swap(arr[41], arr[49]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[58], arr[59]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[12], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[17]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[47]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[45], arr[49]);
        sorting_impl::min_max_swap(arr[46], arr[50]);
        sorting_impl::min_max_swap(arr[56], arr[58]);
        sorting_impl::min_max_swap(arr[57], arr[59]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[15]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[14], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[23]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[27]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[31]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[35]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[39]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[43]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[47]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[51]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[55]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[59], arr[60]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[20], arr[23]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[24], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[35]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[47]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
    }
};

// Optimal network for N=64: 521 comparators, 21 layers
template <typename T> struct Sorter<T, 64> {
    static METAL_FUNC void sort(thread T (&arr)[64]) {
        sorting_impl::min_max_swap(arr[0], arr[2]);
        sorting_impl::min_max_swap(arr[1], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[6]);
        sorting_impl::min_max_swap(arr[5], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[14]);
        sorting_impl::min_max_swap(arr[13], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[22]);
        sorting_impl::min_max_swap(arr[21], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[42]);
        sorting_impl::min_max_swap(arr[41], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[50]);
        sorting_impl::min_max_swap(arr[49], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[55]);
        sorting_impl::min_max_swap(arr[56], arr[58]);
        sorting_impl::min_max_swap(arr[57], arr[59]);
        sorting_impl::min_max_swap(arr[60], arr[62]);
        sorting_impl::min_max_swap(arr[61], arr[63]);
        sorting_impl::min_max_swap(arr[0], arr[1]);
        sorting_impl::min_max_swap(arr[2], arr[3]);
        sorting_impl::min_max_swap(arr[4], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[7]);
        sorting_impl::min_max_swap(arr[8], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[15]);
        sorting_impl::min_max_swap(arr[16], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[25]);
        sorting_impl::min_max_swap(arr[26], arr[27]);
        sorting_impl::min_max_swap(arr[28], arr[29]);
        sorting_impl::min_max_swap(arr[30], arr[31]);
        sorting_impl::min_max_swap(arr[32], arr[33]);
        sorting_impl::min_max_swap(arr[34], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[37]);
        sorting_impl::min_max_swap(arr[38], arr[39]);
        sorting_impl::min_max_swap(arr[40], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[43]);
        sorting_impl::min_max_swap(arr[44], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[47]);
        sorting_impl::min_max_swap(arr[48], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[51]);
        sorting_impl::min_max_swap(arr[52], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[55]);
        sorting_impl::min_max_swap(arr[56], arr[57]);
        sorting_impl::min_max_swap(arr[58], arr[59]);
        sorting_impl::min_max_swap(arr[60], arr[61]);
        sorting_impl::min_max_swap(arr[62], arr[63]);
        sorting_impl::min_max_swap(arr[0], arr[52]);
        sorting_impl::min_max_swap(arr[1], arr[2]);
        sorting_impl::min_max_swap(arr[3], arr[55]);
        sorting_impl::min_max_swap(arr[4], arr[48]);
        sorting_impl::min_max_swap(arr[5], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[51]);
        sorting_impl::min_max_swap(arr[8], arr[60]);
        sorting_impl::min_max_swap(arr[9], arr[10]);
        sorting_impl::min_max_swap(arr[11], arr[63]);
        sorting_impl::min_max_swap(arr[12], arr[56]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[59]);
        sorting_impl::min_max_swap(arr[16], arr[32]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[35]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[28], arr[44]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[47]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[53], arr[54]);
        sorting_impl::min_max_swap(arr[57], arr[58]);
        sorting_impl::min_max_swap(arr[61], arr[62]);
        sorting_impl::min_max_swap(arr[0], arr[20]);
        sorting_impl::min_max_swap(arr[1], arr[53]);
        sorting_impl::min_max_swap(arr[2], arr[54]);
        sorting_impl::min_max_swap(arr[3], arr[23]);
        sorting_impl::min_max_swap(arr[4], arr[28]);
        sorting_impl::min_max_swap(arr[5], arr[49]);
        sorting_impl::min_max_swap(arr[6], arr[50]);
        sorting_impl::min_max_swap(arr[7], arr[31]);
        sorting_impl::min_max_swap(arr[8], arr[36]);
        sorting_impl::min_max_swap(arr[9], arr[61]);
        sorting_impl::min_max_swap(arr[10], arr[62]);
        sorting_impl::min_max_swap(arr[11], arr[39]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[57]);
        sorting_impl::min_max_swap(arr[14], arr[58]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[18], arr[34]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[24], arr[52]);
        sorting_impl::min_max_swap(arr[27], arr[55]);
        sorting_impl::min_max_swap(arr[29], arr[45]);
        sorting_impl::min_max_swap(arr[30], arr[46]);
        sorting_impl::min_max_swap(arr[32], arr[56]);
        sorting_impl::min_max_swap(arr[35], arr[59]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[40], arr[60]);
        sorting_impl::min_max_swap(arr[43], arr[63]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[51]);
        sorting_impl::min_max_swap(arr[0], arr[4]);
        sorting_impl::min_max_swap(arr[1], arr[21]);
        sorting_impl::min_max_swap(arr[2], arr[22]);
        sorting_impl::min_max_swap(arr[3], arr[7]);
        sorting_impl::min_max_swap(arr[5], arr[29]);
        sorting_impl::min_max_swap(arr[6], arr[30]);
        sorting_impl::min_max_swap(arr[8], arr[12]);
        sorting_impl::min_max_swap(arr[9], arr[37]);
        sorting_impl::min_max_swap(arr[10], arr[38]);
        sorting_impl::min_max_swap(arr[11], arr[15]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[16], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[25], arr[53]);
        sorting_impl::min_max_swap(arr[26], arr[54]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[33], arr[57]);
        sorting_impl::min_max_swap(arr[34], arr[58]);
        sorting_impl::min_max_swap(arr[40], arr[44]);
        sorting_impl::min_max_swap(arr[41], arr[61]);
        sorting_impl::min_max_swap(arr[42], arr[62]);
        sorting_impl::min_max_swap(arr[43], arr[47]);
        sorting_impl::min_max_swap(arr[45], arr[49]);
        sorting_impl::min_max_swap(arr[46], arr[50]);
        sorting_impl::min_max_swap(arr[48], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[55]);
        sorting_impl::min_max_swap(arr[56], arr[60]);
        sorting_impl::min_max_swap(arr[59], arr[63]);
        sorting_impl::min_max_swap(arr[0], arr[8]);
        sorting_impl::min_max_swap(arr[1], arr[5]);
        sorting_impl::min_max_swap(arr[2], arr[6]);
        sorting_impl::min_max_swap(arr[3], arr[11]);
        sorting_impl::min_max_swap(arr[4], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[15]);
        sorting_impl::min_max_swap(arr[9], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[14]);
        sorting_impl::min_max_swap(arr[16], arr[40]);
        sorting_impl::min_max_swap(arr[17], arr[21]);
        sorting_impl::min_max_swap(arr[18], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[43]);
        sorting_impl::min_max_swap(arr[20], arr[44]);
        sorting_impl::min_max_swap(arr[23], arr[47]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[41], arr[45]);
        sorting_impl::min_max_swap(arr[42], arr[46]);
        sorting_impl::min_max_swap(arr[48], arr[56]);
        sorting_impl::min_max_swap(arr[49], arr[53]);
        sorting_impl::min_max_swap(arr[50], arr[54]);
        sorting_impl::min_max_swap(arr[51], arr[59]);
        sorting_impl::min_max_swap(arr[52], arr[60]);
        sorting_impl::min_max_swap(arr[55], arr[63]);
        sorting_impl::min_max_swap(arr[57], arr[61]);
        sorting_impl::min_max_swap(arr[58], arr[62]);
        sorting_impl::min_max_swap(arr[1], arr[9]);
        sorting_impl::min_max_swap(arr[2], arr[10]);
        sorting_impl::min_max_swap(arr[4], arr[8]);
        sorting_impl::min_max_swap(arr[5], arr[13]);
        sorting_impl::min_max_swap(arr[6], arr[14]);
        sorting_impl::min_max_swap(arr[7], arr[11]);
        sorting_impl::min_max_swap(arr[12], arr[48]);
        sorting_impl::min_max_swap(arr[15], arr[51]);
        sorting_impl::min_max_swap(arr[16], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[41]);
        sorting_impl::min_max_swap(arr[18], arr[42]);
        sorting_impl::min_max_swap(arr[19], arr[27]);
        sorting_impl::min_max_swap(arr[20], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[45]);
        sorting_impl::min_max_swap(arr[22], arr[46]);
        sorting_impl::min_max_swap(arr[23], arr[31]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[32], arr[40]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[43]);
        sorting_impl::min_max_swap(arr[36], arr[44]);
        sorting_impl::min_max_swap(arr[39], arr[47]);
        sorting_impl::min_max_swap(arr[49], arr[57]);
        sorting_impl::min_max_swap(arr[50], arr[58]);
        sorting_impl::min_max_swap(arr[52], arr[56]);
        sorting_impl::min_max_swap(arr[53], arr[61]);
        sorting_impl::min_max_swap(arr[54], arr[62]);
        sorting_impl::min_max_swap(arr[55], arr[59]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[9]);
        sorting_impl::min_max_swap(arr[6], arr[10]);
        sorting_impl::min_max_swap(arr[7], arr[19]);
        sorting_impl::min_max_swap(arr[8], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[27]);
        sorting_impl::min_max_swap(arr[13], arr[49]);
        sorting_impl::min_max_swap(arr[14], arr[50]);
        sorting_impl::min_max_swap(arr[17], arr[25]);
        sorting_impl::min_max_swap(arr[18], arr[26]);
        sorting_impl::min_max_swap(arr[20], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[29]);
        sorting_impl::min_max_swap(arr[22], arr[30]);
        sorting_impl::min_max_swap(arr[23], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[40]);
        sorting_impl::min_max_swap(arr[31], arr[43]);
        sorting_impl::min_max_swap(arr[33], arr[41]);
        sorting_impl::min_max_swap(arr[34], arr[42]);
        sorting_impl::min_max_swap(arr[36], arr[52]);
        sorting_impl::min_max_swap(arr[37], arr[45]);
        sorting_impl::min_max_swap(arr[38], arr[46]);
        sorting_impl::min_max_swap(arr[39], arr[55]);
        sorting_impl::min_max_swap(arr[44], arr[56]);
        sorting_impl::min_max_swap(arr[47], arr[59]);
        sorting_impl::min_max_swap(arr[53], arr[57]);
        sorting_impl::min_max_swap(arr[54], arr[58]);
        sorting_impl::min_max_swap(arr[1], arr[4]);
        sorting_impl::min_max_swap(arr[5], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[18]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[9], arr[25]);
        sorting_impl::min_max_swap(arr[10], arr[26]);
        sorting_impl::min_max_swap(arr[11], arr[19]);
        sorting_impl::min_max_swap(arr[12], arr[24]);
        sorting_impl::min_max_swap(arr[15], arr[27]);
        sorting_impl::min_max_swap(arr[21], arr[33]);
        sorting_impl::min_max_swap(arr[22], arr[34]);
        sorting_impl::min_max_swap(arr[29], arr[41]);
        sorting_impl::min_max_swap(arr[30], arr[42]);
        sorting_impl::min_max_swap(arr[36], arr[48]);
        sorting_impl::min_max_swap(arr[37], arr[53]);
        sorting_impl::min_max_swap(arr[38], arr[54]);
        sorting_impl::min_max_swap(arr[39], arr[51]);
        sorting_impl::min_max_swap(arr[44], arr[52]);
        sorting_impl::min_max_swap(arr[45], arr[57]);
        sorting_impl::min_max_swap(arr[46], arr[58]);
        sorting_impl::min_max_swap(arr[47], arr[55]);
        sorting_impl::min_max_swap(arr[59], arr[62]);
        sorting_impl::min_max_swap(arr[2], arr[8]);
        sorting_impl::min_max_swap(arr[9], arr[17]);
        sorting_impl::min_max_swap(arr[10], arr[18]);
        sorting_impl::min_max_swap(arr[12], arr[20]);
        sorting_impl::min_max_swap(arr[13], arr[25]);
        sorting_impl::min_max_swap(arr[14], arr[26]);
        sorting_impl::min_max_swap(arr[15], arr[23]);
        sorting_impl::min_max_swap(arr[24], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[35]);
        sorting_impl::min_max_swap(arr[28], arr[36]);
        sorting_impl::min_max_swap(arr[31], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[49]);
        sorting_impl::min_max_swap(arr[38], arr[50]);
        sorting_impl::min_max_swap(arr[40], arr[48]);
        sorting_impl::min_max_swap(arr[43], arr[51]);
        sorting_impl::min_max_swap(arr[45], arr[53]);
        sorting_impl::min_max_swap(arr[46], arr[54]);
        sorting_impl::min_max_swap(arr[55], arr[61]);
        sorting_impl::min_max_swap(arr[2], arr[4]);
        sorting_impl::min_max_swap(arr[12], arr[16]);
        sorting_impl::min_max_swap(arr[13], arr[21]);
        sorting_impl::min_max_swap(arr[14], arr[22]);
        sorting_impl::min_max_swap(arr[15], arr[19]);
        sorting_impl::min_max_swap(arr[20], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[27]);
        sorting_impl::min_max_swap(arr[25], arr[33]);
        sorting_impl::min_max_swap(arr[26], arr[34]);
        sorting_impl::min_max_swap(arr[28], arr[32]);
        sorting_impl::min_max_swap(arr[29], arr[37]);
        sorting_impl::min_max_swap(arr[30], arr[38]);
        sorting_impl::min_max_swap(arr[31], arr[35]);
        sorting_impl::min_max_swap(arr[36], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[43]);
        sorting_impl::min_max_swap(arr[41], arr[49]);
        sorting_impl::min_max_swap(arr[42], arr[50]);
        sorting_impl::min_max_swap(arr[44], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[51]);
        sorting_impl::min_max_swap(arr[59], arr[61]);
        sorting_impl::min_max_swap(arr[4], arr[16]);
        sorting_impl::min_max_swap(arr[5], arr[20]);
        sorting_impl::min_max_swap(arr[10], arr[40]);
        sorting_impl::min_max_swap(arr[13], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[18]);
        sorting_impl::min_max_swap(arr[21], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[53]);
        sorting_impl::min_max_swap(arr[24], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[31]);
        sorting_impl::min_max_swap(arr[29], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[34]);
        sorting_impl::min_max_swap(arr[32], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[39]);
        sorting_impl::min_max_swap(arr[37], arr[41]);
        sorting_impl::min_max_swap(arr[38], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[58]);
        sorting_impl::min_max_swap(arr[45], arr[49]);
        sorting_impl::min_max_swap(arr[46], arr[50]);
        sorting_impl::min_max_swap(arr[47], arr[59]);
        sorting_impl::min_max_swap(arr[3], arr[17]);
        sorting_impl::min_max_swap(arr[6], arr[36]);
        sorting_impl::min_max_swap(arr[7], arr[21]);
        sorting_impl::min_max_swap(arr[8], arr[32]);
        sorting_impl::min_max_swap(arr[9], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[41]);
        sorting_impl::min_max_swap(arr[13], arr[28]);
        sorting_impl::min_max_swap(arr[14], arr[44]);
        sorting_impl::min_max_swap(arr[15], arr[45]);
        sorting_impl::min_max_swap(arr[18], arr[48]);
        sorting_impl::min_max_swap(arr[19], arr[49]);
        sorting_impl::min_max_swap(arr[22], arr[52]);
        sorting_impl::min_max_swap(arr[25], arr[29]);
        sorting_impl::min_max_swap(arr[26], arr[30]);
        sorting_impl::min_max_swap(arr[27], arr[57]);
        sorting_impl::min_max_swap(arr[31], arr[55]);
        sorting_impl::min_max_swap(arr[33], arr[37]);
        sorting_impl::min_max_swap(arr[34], arr[38]);
        sorting_impl::min_max_swap(arr[35], arr[50]);
        sorting_impl::min_max_swap(arr[39], arr[54]);
        sorting_impl::min_max_swap(arr[42], arr[56]);
        sorting_impl::min_max_swap(arr[46], arr[60]);
        sorting_impl::min_max_swap(arr[6], arr[20]);
        sorting_impl::min_max_swap(arr[8], arr[16]);
        sorting_impl::min_max_swap(arr[10], arr[24]);
        sorting_impl::min_max_swap(arr[11], arr[25]);
        sorting_impl::min_max_swap(arr[14], arr[28]);
        sorting_impl::min_max_swap(arr[15], arr[29]);
        sorting_impl::min_max_swap(arr[17], arr[33]);
        sorting_impl::min_max_swap(arr[18], arr[32]);
        sorting_impl::min_max_swap(arr[21], arr[37]);
        sorting_impl::min_max_swap(arr[22], arr[36]);
        sorting_impl::min_max_swap(arr[26], arr[42]);
        sorting_impl::min_max_swap(arr[27], arr[41]);
        sorting_impl::min_max_swap(arr[30], arr[46]);
        sorting_impl::min_max_swap(arr[31], arr[45]);
        sorting_impl::min_max_swap(arr[34], arr[48]);
        sorting_impl::min_max_swap(arr[35], arr[49]);
        sorting_impl::min_max_swap(arr[38], arr[52]);
        sorting_impl::min_max_swap(arr[39], arr[53]);
        sorting_impl::min_max_swap(arr[43], arr[57]);
        sorting_impl::min_max_swap(arr[47], arr[55]);
        sorting_impl::min_max_swap(arr[3], arr[18]);
        sorting_impl::min_max_swap(arr[5], arr[8]);
        sorting_impl::min_max_swap(arr[6], arr[12]);
        sorting_impl::min_max_swap(arr[7], arr[22]);
        sorting_impl::min_max_swap(arr[15], arr[21]);
        sorting_impl::min_max_swap(arr[17], arr[32]);
        sorting_impl::min_max_swap(arr[19], arr[33]);
        sorting_impl::min_max_swap(arr[23], arr[37]);
        sorting_impl::min_max_swap(arr[26], arr[40]);
        sorting_impl::min_max_swap(arr[30], arr[44]);
        sorting_impl::min_max_swap(arr[31], arr[46]);
        sorting_impl::min_max_swap(arr[41], arr[56]);
        sorting_impl::min_max_swap(arr[42], arr[48]);
        sorting_impl::min_max_swap(arr[45], arr[60]);
        sorting_impl::min_max_swap(arr[51], arr[57]);
        sorting_impl::min_max_swap(arr[55], arr[58]);
        sorting_impl::min_max_swap(arr[3], arr[16]);
        sorting_impl::min_max_swap(arr[7], arr[20]);
        sorting_impl::min_max_swap(arr[11], arr[26]);
        sorting_impl::min_max_swap(arr[18], arr[24]);
        sorting_impl::min_max_swap(arr[19], arr[25]);
        sorting_impl::min_max_swap(arr[22], arr[28]);
        sorting_impl::min_max_swap(arr[23], arr[29]);
        sorting_impl::min_max_swap(arr[27], arr[33]);
        sorting_impl::min_max_swap(arr[30], arr[36]);
        sorting_impl::min_max_swap(arr[34], arr[40]);
        sorting_impl::min_max_swap(arr[35], arr[41]);
        sorting_impl::min_max_swap(arr[37], arr[52]);
        sorting_impl::min_max_swap(arr[38], arr[44]);
        sorting_impl::min_max_swap(arr[39], arr[45]);
        sorting_impl::min_max_swap(arr[43], arr[56]);
        sorting_impl::min_max_swap(arr[47], arr[60]);
        sorting_impl::min_max_swap(arr[3], arr[9]);
        sorting_impl::min_max_swap(arr[7], arr[13]);
        sorting_impl::min_max_swap(arr[10], arr[16]);
        sorting_impl::min_max_swap(arr[11], arr[17]);
        sorting_impl::min_max_swap(arr[14], arr[20]);
        sorting_impl::min_max_swap(arr[15], arr[30]);
        sorting_impl::min_max_swap(arr[19], arr[34]);
        sorting_impl::min_max_swap(arr[21], arr[36]);
        sorting_impl::min_max_swap(arr[23], arr[38]);
        sorting_impl::min_max_swap(arr[25], arr[40]);
        sorting_impl::min_max_swap(arr[26], arr[32]);
        sorting_impl::min_max_swap(arr[27], arr[42]);
        sorting_impl::min_max_swap(arr[29], arr[44]);
        sorting_impl::min_max_swap(arr[31], arr[37]);
        sorting_impl::min_max_swap(arr[33], arr[48]);
        sorting_impl::min_max_swap(arr[43], arr[49]);
        sorting_impl::min_max_swap(arr[46], arr[52]);
        sorting_impl::min_max_swap(arr[47], arr[53]);
        sorting_impl::min_max_swap(arr[50], arr[56]);
        sorting_impl::min_max_swap(arr[54], arr[60]);
        sorting_impl::min_max_swap(arr[3], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[10]);
        sorting_impl::min_max_swap(arr[9], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[18]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[24]);
        sorting_impl::min_max_swap(arr[17], arr[22]);
        sorting_impl::min_max_swap(arr[19], arr[28]);
        sorting_impl::min_max_swap(arr[21], arr[26]);
        sorting_impl::min_max_swap(arr[23], arr[25]);
        sorting_impl::min_max_swap(arr[27], arr[34]);
        sorting_impl::min_max_swap(arr[29], arr[36]);
        sorting_impl::min_max_swap(arr[30], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[33]);
        sorting_impl::min_max_swap(arr[35], arr[44]);
        sorting_impl::min_max_swap(arr[37], arr[42]);
        sorting_impl::min_max_swap(arr[38], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[48]);
        sorting_impl::min_max_swap(arr[41], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[52]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[54]);
        sorting_impl::min_max_swap(arr[53], arr[56]);
        sorting_impl::min_max_swap(arr[55], arr[60]);
        sorting_impl::min_max_swap(arr[3], arr[6]);
        sorting_impl::min_max_swap(arr[7], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[17]);
        sorting_impl::min_max_swap(arr[18], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[24]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[30]);
        sorting_impl::min_max_swap(arr[25], arr[32]);
        sorting_impl::min_max_swap(arr[26], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[29]);
        sorting_impl::min_max_swap(arr[31], arr[38]);
        sorting_impl::min_max_swap(arr[33], arr[40]);
        sorting_impl::min_max_swap(arr[34], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[37]);
        sorting_impl::min_max_swap(arr[39], arr[44]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[45]);
        sorting_impl::min_max_swap(arr[46], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[56]);
        sorting_impl::min_max_swap(arr[57], arr[60]);
        sorting_impl::min_max_swap(arr[3], arr[5]);
        sorting_impl::min_max_swap(arr[6], arr[8]);
        sorting_impl::min_max_swap(arr[7], arr[9]);
        sorting_impl::min_max_swap(arr[10], arr[12]);
        sorting_impl::min_max_swap(arr[11], arr[13]);
        sorting_impl::min_max_swap(arr[14], arr[16]);
        sorting_impl::min_max_swap(arr[15], arr[18]);
        sorting_impl::min_max_swap(arr[17], arr[20]);
        sorting_impl::min_max_swap(arr[19], arr[21]);
        sorting_impl::min_max_swap(arr[22], arr[24]);
        sorting_impl::min_max_swap(arr[23], arr[26]);
        sorting_impl::min_max_swap(arr[25], arr[28]);
        sorting_impl::min_max_swap(arr[27], arr[30]);
        sorting_impl::min_max_swap(arr[29], arr[32]);
        sorting_impl::min_max_swap(arr[31], arr[34]);
        sorting_impl::min_max_swap(arr[33], arr[36]);
        sorting_impl::min_max_swap(arr[35], arr[38]);
        sorting_impl::min_max_swap(arr[37], arr[40]);
        sorting_impl::min_max_swap(arr[39], arr[41]);
        sorting_impl::min_max_swap(arr[42], arr[44]);
        sorting_impl::min_max_swap(arr[43], arr[46]);
        sorting_impl::min_max_swap(arr[45], arr[48]);
        sorting_impl::min_max_swap(arr[47], arr[49]);
        sorting_impl::min_max_swap(arr[50], arr[52]);
        sorting_impl::min_max_swap(arr[51], arr[53]);
        sorting_impl::min_max_swap(arr[54], arr[56]);
        sorting_impl::min_max_swap(arr[55], arr[57]);
        sorting_impl::min_max_swap(arr[58], arr[60]);
        sorting_impl::min_max_swap(arr[3], arr[4]);
        sorting_impl::min_max_swap(arr[7], arr[8]);
        sorting_impl::min_max_swap(arr[11], arr[12]);
        sorting_impl::min_max_swap(arr[13], arr[14]);
        sorting_impl::min_max_swap(arr[15], arr[16]);
        sorting_impl::min_max_swap(arr[17], arr[18]);
        sorting_impl::min_max_swap(arr[19], arr[20]);
        sorting_impl::min_max_swap(arr[21], arr[22]);
        sorting_impl::min_max_swap(arr[23], arr[24]);
        sorting_impl::min_max_swap(arr[25], arr[26]);
        sorting_impl::min_max_swap(arr[27], arr[28]);
        sorting_impl::min_max_swap(arr[29], arr[30]);
        sorting_impl::min_max_swap(arr[31], arr[32]);
        sorting_impl::min_max_swap(arr[33], arr[34]);
        sorting_impl::min_max_swap(arr[35], arr[36]);
        sorting_impl::min_max_swap(arr[37], arr[38]);
        sorting_impl::min_max_swap(arr[39], arr[40]);
        sorting_impl::min_max_swap(arr[41], arr[42]);
        sorting_impl::min_max_swap(arr[43], arr[44]);
        sorting_impl::min_max_swap(arr[45], arr[46]);
        sorting_impl::min_max_swap(arr[47], arr[48]);
        sorting_impl::min_max_swap(arr[49], arr[50]);
        sorting_impl::min_max_swap(arr[51], arr[52]);
        sorting_impl::min_max_swap(arr[55], arr[56]);
        sorting_impl::min_max_swap(arr[59], arr[60]);
    }
};

} // namespace sorting_networks

template <typename T, size_t N> METAL_FUNC void SortArray(thread T (&arr)[N]) {
    sorting_networks::Sorter<T, N>::sort(arr);
}
